<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HP85 GPIB Disk Emulator: gpib/gpib_hal.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d6b38c553053a83c6809a5b0d50557a4.html">gpib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">gpib_hal.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="gpib__hal_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#ifndef _GPIB_HAL_H_</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#define _GPIB_HAL_H_</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;user_config.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/* 2 Microseconds */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a5f1e4767ce01d70700e03b6eb4965fce">   21</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_SETTLE() _delay_us(GPIB_BUS_SETTLE_DELAY)</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a4e9b50fcf601cb4f967d11668cd9e640">   23</a></span>&#160;<span class="preprocessor">#define GPIB_TASK_TIC_US SYSTEM_TASK_TIC_US       </span><span class="comment">/* Interrupt time in US */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6aaf20205cebc55cf256db1750fab754">   25</a></span>&#160;<span class="preprocessor">#define SYSTEM_ELAPSED_TIMER                      </span><span class="comment">/* We have a system elapsed time function */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="struct__gpib__t.html">   27</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__gpib__t.html">_gpib_t</a></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="struct__gpib__t.html#a99a38aef880eb075f625f33d7bac31dd">   29</a></span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct__gpib__t.html#a99a38aef880eb075f625f33d7bac31dd">elapsed</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="struct__gpib__t.html#a21ed3be06f76b0a5237b5e64bc2e8793">   30</a></span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct__gpib__t.html#a21ed3be06f76b0a5237b5e64bc2e8793">down_counter</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="struct__gpib__t.html#af2622dd8668ecb24c42a2da2d8956538">   31</a></span>&#160;    <span class="keyword">volatile</span> uint8_t  <a class="code" href="struct__gpib__t.html#af2622dd8668ecb24c42a2da2d8956538">down_counter_done</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;} <a class="code" href="gpib__hal_8h.html#a9457cd46dc201d12b1382d959db2a99a">gpib_t</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">extern</span> <a class="code" href="struct__gpib__t.html">gpib_t</a> <a class="code" href="gpib__hal_8h.html#aced56ceaa5d240d5554a33f88596f87a">gpib_timer</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a9b6c518118134f3eb680bf927e93c836">gpib_clock_task</a>( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// control pins are the same on V1 and V2 hardware</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a04c9015da7e7ea45f3b80793809e2d7b">   60</a></span>&#160;<span class="preprocessor">#define EOI     GPIO_B0</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6d9a5bc64954c2ad62878e3d085ad195">   61</a></span>&#160;<span class="preprocessor">#define DAV     GPIO_B1</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a66d99cbdcb5eca1c98305670555c7fed">   62</a></span>&#160;<span class="preprocessor">#define NRFD    GPIO_D2</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a1ab54a10fda88683f0334ff44ed767b4">   63</a></span>&#160;<span class="preprocessor">#define NDAC    GPIO_D3</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a98c8976d9563bbcf85c8584e18da38fe">   64</a></span>&#160;<span class="preprocessor">#define IFC     GPIO_D4</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#afb7e2b9da4a7821f2ef93bbcd5a06455">   65</a></span>&#160;<span class="preprocessor">#define SRQ     GPIO_D5</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#aea909158791869e412489f94e406bf49">   66</a></span>&#160;<span class="preprocessor">#define ATN     GPIO_D6</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#aa2fb3f18026b5d00ec5ef71cf8d4b11a">   67</a></span>&#160;<span class="preprocessor">#define REN     GPIO_D7</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// V2 Hardware</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a91c0a910ad7ea895ed9093c9286df2f2">   71</a></span>&#160;<span class="preprocessor">#define TE       GPIO_C2</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a211238ffe3627f42ca7b04bc96cc8fa6">   72</a></span>&#160;<span class="preprocessor">#define PE       GPIO_C3</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a0caba21dab832e280875be65012b30fc">   73</a></span>&#160;<span class="preprocessor">#define DC       GPIO_C4</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6bb7a09d1931dfbdd6d373cfe6e23357">   74</a></span>&#160;<span class="preprocessor">#define SC       GPIO_C5</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a8aa85ae9867fabf70ec72cd3bf6fb6b9">   75</a></span>&#160;<span class="preprocessor">#define LED1     GPIO_C6</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#ad09fe5bf321b9a2de26bd5e5b9af6424">   76</a></span>&#160;<span class="preprocessor">#define LED2     GPIO_C7</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// No loger being used</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#ifndef SOFTWARE_PP</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#warning Hardware PP</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a39fe078b5a325a0726e6d3d3b97f676a">   81</a></span>&#160;<span class="preprocessor">#define PPE     GPIO_B2</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a0b2a1814bd9e6743b4389e0f9dce5e67">   85</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_OUT()      GPIO_PORT_DIR_OUT(GPIO_A)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6d56693f4cf584bd0f60e34bac99a846">   88</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_IN()       GPIO_PORT_DIR_IN(GPIO_A)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a360b506405be91c57d60724c5723e168">   91</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_RD()       GPIO_PORT_RD(GPIO_A)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6b58c5851635d545d6e7e7f9baffec4c">   94</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_LATCH_WR(val) GPIO_PORT_LATCH_WR(GPIO_A,val)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#aac80fb12d152d2c16e4d03a4f532d1ea">   97</a></span>&#160;<span class="preprocessor">#define GPIB_BUS_WR(val)    GPIO_PORT_WR(GPIO_A,val)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a791321fe5dc2aaf147710c704587c523">  100</a></span>&#160;<span class="preprocessor">#define GPIB_PIN_FLOAT(a)   GPIO_PIN_FLOAT(a)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a0d8b06d1a93831bdbc74bb7af8a8d852">  103</a></span>&#160;<span class="preprocessor">#define GPIB_PIN_FLOAT_UP(a) GPIO_PIN_FLOAT_UP(a)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#ac6ed36a22852a8e7a9ed289deb137047">  106</a></span>&#160;<span class="preprocessor">#define GPIB_PIN_TST(a)     GPIO_PIN_TST(a)</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#ab8fe1f9ee670a2833ebbdfedec6c1639">  109</a></span>&#160;<span class="preprocessor">#define GPIB_IO_LOW(a)      GPIO_PIN_LOW(a)</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a57be21f6c44a30c4530aea7042fa92ff">  112</a></span>&#160;<span class="preprocessor">#define GPIB_IO_HI(a)       GPIO_PIN_HI(a)</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a74560e7f71795a19c2283e47bdbebe8d">  115</a></span>&#160;<span class="preprocessor">#define GPIB_IO_RD(a)       GPIO_PIN_RD(a)</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a4b86f5b46fe174e40e8716e4de6f8815">  118</a></span>&#160;<span class="preprocessor">#define GPIB_LATCH_HI(a)    GPIO_PIN_LATCH_LOW(a)</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#aec14c14254af5023c2fdb4f3347bd32d">  121</a></span>&#160;<span class="preprocessor">#define GPIB_LATCH_LOW(a)   GPIO_PIN_LATCH_HI(a)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a93e10465c024f1db73fb3a872f8d57f3">  124</a></span>&#160;<span class="preprocessor">#define GPIB_LATCH_RD(a)    GPIO_PIN_LATCH_RD(a)</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a70e10956bbb3c7a75ad46eaf84a2e236">  132</a></span>&#160;<span class="preprocessor">#define GPIB_PPR_RD()       GPIO_PORT_PINS_RD(GPIO_A)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="gpib__hal_8h.html#a6d2654cc317a5a5ceb2a5f8ce8ae38bf">  136</a></span>&#160;<span class="preprocessor">#define GPIB_PPR_DDR_RD()   GPIO_PORT_DDR_RD(GPIO_A)</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// FIXME just to be safe we check that evreything is defained</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_RD</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#error GPIB_BUS_RD read macro is not defined</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_WR</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#error GPIB_BUS_WR write macro is not defined</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_IN</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#error GPIB_BUS_IN read macro is not defined</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_OUT</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#error GPIB_BUS_OUT write macro is not defined</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_LATCH_WR</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#error GPIB_BUS_LATCH_WR  write macro is not defined</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#ifndef GPIB_BUS_SETTLE</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#error GPIB_BUS_SETTLE write macro is not defined</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#ifndef GPIB_IO_RD</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#error GPIB_IO_RD is not defined</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#ifndef GPIB_IO_LOW</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#error GPIB_IO_LOW is not defined</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#ifndef GPIB_IO_HI</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#error GPIB_IO_HI is not defined</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#ifndef GPIB_PIN_FLOAT</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#error GPIB_PIN_FLOAT is not defined</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#ifndef GPIB_PIN_FLOAT_UP</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#error GPIB_PIN_FLOAT_UP is not defined</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#ifndef GPIB_PIN_TST</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#error GPIB_PIN_TST is not defined</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/* gpib_hal.c */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#acd3a9c6b7893afed15717f7ed85fc185">gpib_timer_init</a> ( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;uint8_t <a class="code" href="gpib__hal_8h.html#aaff7ca1ff8eb6c387fe41ce530fe0eb8">reverse_8bits</a> ( uint8_t mask );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a62ab33e5f2d926916ee673ddcb8e9410">ppr_set</a> ( uint8_t mask );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a8772af94e84d58285c52be53679bfbb2">soft_ppr_assert</a> ( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a2065b4c9ff1a1c90a90779fc31870511">soft_ppr_restore</a> ( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;uint8_t <a class="code" href="gpib__hal_8h.html#a57653cc4c2dc251f12d5cc5b1bf7b754">ppr_reg</a> ( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a9198a0ec473e147423887e68bb9f267d">ppr_init</a> ( <span class="keywordtype">void</span> );</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#a4ab95314499ea3d42ead5229bfbc2b27">ppr_bit_set</a> ( uint8_t bit );</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">void</span> <a class="code" href="gpib__hal_8h.html#af29c709ec1aeedc42ff180662636d8c6">ppr_bit_clr</a> ( uint8_t bit );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="gpib__hal_8h.html#a7d75cde9e0af3c75dce17919bdf7fe3e">dbf_open</a> ( <a class="code" href="structFIL.html">FIL</a> *fp , <span class="keyword">const</span> <a class="code" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path , <a class="code" href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> mode );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="gpib__hal_8h.html#a2303ee350c0d266ac87a2135936cb727">dbf_read</a> ( <a class="code" href="structFIL.html">FIL</a> *fp , <span class="keywordtype">void</span> *buff , <a class="code" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btr , <a class="code" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *br );</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="gpib__hal_8h.html#a14af877aeb5d346730aaabba033695bf">dbf_write</a> ( <a class="code" href="structFIL.html">FIL</a> *fp , <span class="keyword">const</span> <span class="keywordtype">void</span> *buff , <a class="code" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btw , <a class="code" href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *bw );</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="gpib__hal_8h.html#afd7a928788776071dc461e7d99d9f506">dbf_lseek</a> ( <a class="code" href="structFIL.html">FIL</a> *fp , <a class="code" href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ofs );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> <a class="code" href="gpib__hal_8h.html#a827fbebac6fd202d102386e15b92b28b">dbf_close</a> ( <a class="code" href="structFIL.html">FIL</a> *fp );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordtype">int</span> <a class="code" href="gpib__hal_8h.html#af60274390be1b899ca94740dba5931df">dbf_open_read</a> ( <span class="keywordtype">char</span> *name , uint32_t pos , <span class="keywordtype">void</span> *buff , <span class="keywordtype">int</span> size , <span class="keywordtype">int</span> *errors );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordtype">int</span> <a class="code" href="gpib__hal_8h.html#a9a6e6853672fd6150839e79ee4e857af">dbf_open_write</a> ( <span class="keywordtype">char</span> *name , uint32_t pos , <span class="keywordtype">void</span> *buff , <span class="keywordtype">int</span> size , <span class="keywordtype">int</span> *errors );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#endif                                            // #ifndef _GPIB_HAL_H_</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aff_8h_html_a03bdb8ce5895c7e261aadc2529637546"><div class="ttname"><a href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></div><div class="ttdeci">char TCHAR</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00099">ff.h:99</a></div></div>
<div class="ttc" id="astruct__gpib__t_html_af2622dd8668ecb24c42a2da2d8956538"><div class="ttname"><a href="struct__gpib__t.html#af2622dd8668ecb24c42a2da2d8956538">_gpib_t::down_counter_done</a></div><div class="ttdeci">volatile uint8_t down_counter_done</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8h_source.html#l00031">gpib_hal.h:31</a></div></div>
<div class="ttc" id="astructFIL_html"><div class="ttname"><a href="structFIL.html">FIL</a></div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00205">ff.h:205</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a7d75cde9e0af3c75dce17919bdf7fe3e"><div class="ttname"><a href="gpib__hal_8h.html#a7d75cde9e0af3c75dce17919bdf7fe3e">dbf_open</a></div><div class="ttdeci">FRESULT dbf_open(FIL *fp, const TCHAR *path, BYTE mode)</div><div class="ttdoc">Wrapper for FatFs f_open() that can displays errors.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00195">gpib_hal.c:195</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_aaff7ca1ff8eb6c387fe41ce530fe0eb8"><div class="ttname"><a href="gpib__hal_8h.html#aaff7ca1ff8eb6c387fe41ce530fe0eb8">reverse_8bits</a></div><div class="ttdeci">uint8_t reverse_8bits(uint8_t mask)</div><div class="ttdoc">Reverse the bits in an 8 bit value.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00049">gpib_hal.c:49</a></div></div>
<div class="ttc" id="aff_8h_html_a4ae1dab0fb4b072a66584546209e7d58"><div class="ttname"><a href="ff_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a></div><div class="ttdeci">unsigned char BYTE</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00054">ff.h:54</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_aced56ceaa5d240d5554a33f88596f87a"><div class="ttname"><a href="gpib__hal_8h.html#aced56ceaa5d240d5554a33f88596f87a">gpib_timer</a></div><div class="ttdeci">gpib_t gpib_timer</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00022">gpib_hal.c:22</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a2065b4c9ff1a1c90a90779fc31870511"><div class="ttname"><a href="gpib__hal_8h.html#a2065b4c9ff1a1c90a90779fc31870511">soft_ppr_restore</a></div><div class="ttdeci">void soft_ppr_restore(void)</div></div>
<div class="ttc" id="agpib__hal_8h_html_a9198a0ec473e147423887e68bb9f267d"><div class="ttname"><a href="gpib__hal_8h.html#a9198a0ec473e147423887e68bb9f267d">ppr_init</a></div><div class="ttdeci">void ppr_init(void)</div><div class="ttdoc">Reset PPR enable register - all disable..</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00126">gpib_hal.c:126</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a827fbebac6fd202d102386e15b92b28b"><div class="ttname"><a href="gpib__hal_8h.html#a827fbebac6fd202d102386e15b92b28b">dbf_close</a></div><div class="ttdeci">FRESULT dbf_close(FIL *fp)</div><div class="ttdoc">Wrapper of FatFs f_close() that can display errors.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00287">gpib_hal.c:287</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a8772af94e84d58285c52be53679bfbb2"><div class="ttname"><a href="gpib__hal_8h.html#a8772af94e84d58285c52be53679bfbb2">soft_ppr_assert</a></div><div class="ttdeci">void soft_ppr_assert(void)</div></div>
<div class="ttc" id="aff_8h_html_a36cb3b01d81ffd844bbbfb54003e06ec"><div class="ttname"><a href="ff_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a></div><div class="ttdeci">unsigned int UINT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00053">ff.h:53</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a62ab33e5f2d926916ee673ddcb8e9410"><div class="ttname"><a href="gpib__hal_8h.html#a62ab33e5f2d926916ee673ddcb8e9410">ppr_set</a></div><div class="ttdeci">void ppr_set(uint8_t mask)</div><div class="ttdoc">Enable or Disable Parallel Poll Response bits - PPR.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00088">gpib_hal.c:88</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a9457cd46dc201d12b1382d959db2a99a"><div class="ttname"><a href="gpib__hal_8h.html#a9457cd46dc201d12b1382d959db2a99a">gpib_t</a></div><div class="ttdeci">struct _gpib_t gpib_t</div></div>
<div class="ttc" id="astruct__gpib__t_html_a99a38aef880eb075f625f33d7bac31dd"><div class="ttname"><a href="struct__gpib__t.html#a99a38aef880eb075f625f33d7bac31dd">_gpib_t::elapsed</a></div><div class="ttdeci">volatile uint32_t elapsed</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8h_source.html#l00029">gpib_hal.h:29</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a2303ee350c0d266ac87a2135936cb727"><div class="ttname"><a href="gpib__hal_8h.html#a2303ee350c0d266ac87a2135936cb727">dbf_read</a></div><div class="ttdeci">FRESULT dbf_read(FIL *fp, void *buff, UINT btr, UINT *br)</div><div class="ttdoc">Wrapper for FatFs f_read() that can display errors.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00220">gpib_hal.c:220</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a9a6e6853672fd6150839e79ee4e857af"><div class="ttname"><a href="gpib__hal_8h.html#a9a6e6853672fd6150839e79ee4e857af">dbf_open_write</a></div><div class="ttdeci">int dbf_open_write(char *name, uint32_t pos, void *buff, int size, int *errors)</div><div class="ttdoc">Open, Seek, Write data and Close FatFs functions.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00379">gpib_hal.c:379</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a4ab95314499ea3d42ead5229bfbc2b27"><div class="ttname"><a href="gpib__hal_8h.html#a4ab95314499ea3d42ead5229bfbc2b27">ppr_bit_set</a></div><div class="ttdeci">void ppr_bit_set(uint8_t bit)</div><div class="ttdoc">Enable hardware PPR response for a given device.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00153">gpib_hal.c:153</a></div></div>
<div class="ttc" id="aff_8h_html_a49d0171ecbd362cda5680a0d360db44c"><div class="ttname"><a href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></div><div class="ttdeci">FRESULT</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00276">ff.h:276</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a57653cc4c2dc251f12d5cc5b1bf7b754"><div class="ttname"><a href="gpib__hal_8h.html#a57653cc4c2dc251f12d5cc5b1bf7b754">ppr_reg</a></div><div class="ttdeci">uint8_t ppr_reg(void)</div><div class="ttdoc">Return PPR enable register.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00109">gpib_hal.c:109</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a14af877aeb5d346730aaabba033695bf"><div class="ttname"><a href="gpib__hal_8h.html#a14af877aeb5d346730aaabba033695bf">dbf_write</a></div><div class="ttdeci">FRESULT dbf_write(FIL *fp, const void *buff, UINT btw, UINT *bw)</div><div class="ttdoc">wrapper for FatFs f_write() that can display errors.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00244">gpib_hal.c:244</a></div></div>
<div class="ttc" id="astruct__gpib__t_html"><div class="ttname"><a href="struct__gpib__t.html">_gpib_t</a></div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8h_source.html#l00027">gpib_hal.h:27</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_a9b6c518118134f3eb680bf927e93c836"><div class="ttname"><a href="gpib__hal_8h.html#a9b6c518118134f3eb680bf927e93c836">gpib_clock_task</a></div><div class="ttdeci">void gpib_clock_task(void)</div></div>
<div class="ttc" id="agpib__hal_8h_html_afd7a928788776071dc461e7d99d9f506"><div class="ttname"><a href="gpib__hal_8h.html#afd7a928788776071dc461e7d99d9f506">dbf_lseek</a></div><div class="ttdeci">FRESULT dbf_lseek(FIL *fp, DWORD ofs)</div><div class="ttdoc">Wrapper of FatFs f_seek() that can display errors.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00266">gpib_hal.c:266</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_acd3a9c6b7893afed15717f7ed85fc185"><div class="ttname"><a href="gpib__hal_8h.html#acd3a9c6b7893afed15717f7ed85fc185">gpib_timer_init</a></div><div class="ttdeci">void gpib_timer_init(void)</div><div class="ttdoc">===================================================</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00029">gpib_hal.c:29</a></div></div>
<div class="ttc" id="aff_8h_html_ad342ac907eb044443153a22f964bf0af"><div class="ttname"><a href="ff_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a></div><div class="ttdeci">unsigned long DWORD</div><div class="ttdef"><b>Definition:</b> <a href="ff_8h_source.html#l00056">ff.h:56</a></div></div>
<div class="ttc" id="astruct__gpib__t_html_a21ed3be06f76b0a5237b5e64bc2e8793"><div class="ttname"><a href="struct__gpib__t.html#a21ed3be06f76b0a5237b5e64bc2e8793">_gpib_t::down_counter</a></div><div class="ttdeci">volatile uint32_t down_counter</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8h_source.html#l00030">gpib_hal.h:30</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_af29c709ec1aeedc42ff180662636d8c6"><div class="ttname"><a href="gpib__hal_8h.html#af29c709ec1aeedc42ff180662636d8c6">ppr_bit_clr</a></div><div class="ttdeci">void ppr_bit_clr(uint8_t bit)</div><div class="ttdoc">Disbale hardware PPR response for a given device.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00177">gpib_hal.c:177</a></div></div>
<div class="ttc" id="agpib__hal_8h_html_af60274390be1b899ca94740dba5931df"><div class="ttname"><a href="gpib__hal_8h.html#af60274390be1b899ca94740dba5931df">dbf_open_read</a></div><div class="ttdeci">int dbf_open_read(char *name, uint32_t pos, void *buff, int size, int *errors)</div><div class="ttdoc">Open, Seek, Read data and Close FatFs functions.</div><div class="ttdef"><b>Definition:</b> <a href="gpib__hal_8c_source.html#l00314">gpib_hal.c:314</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 7 2020 23:05:58 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
