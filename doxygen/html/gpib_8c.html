<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HP85 GPIB Disk Emulator: gpib/gpib.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d6b38c553053a83c6809a5b0d50557a4.html">gpib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gpib.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GPIB emulator for HP85 disk emulator project for AVR.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;user_config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="hal_8h_source.html">hal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpib__hal_8h_source.html">gpib_hal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="defines_8h_source.html">defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpib_8h_source.html">gpib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpib__task_8h_source.html">gpib_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="amigo_8h_source.html">amigo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ss80_8h_source.html">ss80.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fatfs_8h_source.html">fatfs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="posix_8h_source.html">posix.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
</div>
<p><a href="gpib_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgpib__token__t.html">gpib_token_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIB command mapping to printable strings.  <a href="structgpib__token__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8824827cf2979219e9a65ead803647e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a8824827cf2979219e9a65ead803647e6">gpib_user_task</a> ()</td></tr>
<tr class="memdesc:a8824827cf2979219e9a65ead803647e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">user task called in GPIB read/write byte functions  <a href="gpib_8c.html#a8824827cf2979219e9a65ead803647e6">More...</a><br /></td></tr>
<tr class="separator:a8824827cf2979219e9a65ead803647e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3c1941e17626338b878123677ae797"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a6a3c1941e17626338b878123677ae797">gpib_timer_elapsed_begin</a> (void)</td></tr>
<tr class="memdesc:a6a3c1941e17626338b878123677ae797"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start measuring time - used with hpib_timer_elapsed_end()  <a href="gpib_8c.html#a6a3c1941e17626338b878123677ae797">More...</a><br /></td></tr>
<tr class="separator:a6a3c1941e17626338b878123677ae797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe05115c27148ec7013e6f62dc94ae78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#abe05115c27148ec7013e6f62dc94ae78">gpib_timer_reset</a> (void)</td></tr>
<tr class="memdesc:abe05115c27148ec7013e6f62dc94ae78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset elapsed and timeout timers Elapses and Timeout Timers.  <a href="gpib_8c.html#abe05115c27148ec7013e6f62dc94ae78">More...</a><br /></td></tr>
<tr class="separator:abe05115c27148ec7013e6f62dc94ae78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ae4b4852f4a1987fc61fec20f53d42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a87ae4b4852f4a1987fc61fec20f53d42">gpib_timer_elapsed_end</a> (char *msg)</td></tr>
<tr class="memdesc:a87ae4b4852f4a1987fc61fec20f53d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display user message and time delta since <a class="el" href="gpib_8c.html#a6a3c1941e17626338b878123677ae797" title="Start measuring time - used with hpib_timer_elapsed_end()">gpib_timer_elapsed_begin()</a> call.  <a href="gpib_8c.html#a87ae4b4852f4a1987fc61fec20f53d42">More...</a><br /></td></tr>
<tr class="separator:a87ae4b4852f4a1987fc61fec20f53d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9291b22beebb9d24354af643505f9cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ae9291b22beebb9d24354af643505f9cd">gpib_timer_task</a> ()</td></tr>
<tr class="memdesc:ae9291b22beebb9d24354af643505f9cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main GPIB timer task called by low level interrup hander.  <a href="gpib_8c.html#ae9291b22beebb9d24354af643505f9cd">More...</a><br /></td></tr>
<tr class="separator:ae9291b22beebb9d24354af643505f9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687395337dd5c6604a775e3ffd3f006f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a687395337dd5c6604a775e3ffd3f006f">gpib_timeout_set</a> (uint32_t <a class="el" href="time_8h.html#a32b1cbd925752f0cd61d202bbe204a69">time</a>)</td></tr>
<tr class="memdesc:a687395337dd5c6604a775e3ffd3f006f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set GPIB timeout timer in units of GPIB_TASK_TIC_US.  <a href="gpib_8c.html#a687395337dd5c6604a775e3ffd3f006f">More...</a><br /></td></tr>
<tr class="separator:a687395337dd5c6604a775e3ffd3f006f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb10b99d17dd69982b6bfc820fb29db"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a3eb10b99d17dd69982b6bfc820fb29db">gpib_timeout_test</a> ()</td></tr>
<tr class="memdesc:a3eb10b99d17dd69982b6bfc820fb29db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test GPIB timeout timer for timeout condition.  <a href="gpib_8c.html#a3eb10b99d17dd69982b6bfc820fb29db">More...</a><br /></td></tr>
<tr class="separator:a3eb10b99d17dd69982b6bfc820fb29db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28f9b1b4f9a2755255b880b63876593"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ac28f9b1b4f9a2755255b880b63876593">gpib_bus_init</a> ()</td></tr>
<tr class="memdesc:ac28f9b1b4f9a2755255b880b63876593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize/Release GPIB Bus control lines Used for Power ON, Reset or IFC LOW reset conditions.  <a href="gpib_8c.html#ac28f9b1b4f9a2755255b880b63876593">More...</a><br /></td></tr>
<tr class="separator:ac28f9b1b4f9a2755255b880b63876593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a354056604783f9020f1494c1e3c6fb64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a354056604783f9020f1494c1e3c6fb64">gpib_rx_init</a> (uint8_t busy)</td></tr>
<tr class="memdesc:a354056604783f9020f1494c1e3c6fb64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GPIB Bus control lines for READ.  <a href="gpib_8c.html#a354056604783f9020f1494c1e3c6fb64">More...</a><br /></td></tr>
<tr class="separator:a354056604783f9020f1494c1e3c6fb64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741b786d57a31d4e4d6e8ea99dd8cc3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a741b786d57a31d4e4d6e8ea99dd8cc3d">gpib_tx_init</a> ()</td></tr>
<tr class="memdesc:a741b786d57a31d4e4d6e8ea99dd8cc3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GPIB Bus control lines for WRITE.  <a href="gpib_8c.html#a741b786d57a31d4e4d6e8ea99dd8cc3d">More...</a><br /></td></tr>
<tr class="separator:a741b786d57a31d4e4d6e8ea99dd8cc3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d2476eec2bbdf15e7db1b901c5a671"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a32d2476eec2bbdf15e7db1b901c5a671">gpib_state_init</a> (void)</td></tr>
<tr class="memdesc:a32d2476eec2bbdf15e7db1b901c5a671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset GPIB states and related variables.  <a href="gpib_8c.html#a32d2476eec2bbdf15e7db1b901c5a671">More...</a><br /></td></tr>
<tr class="separator:a32d2476eec2bbdf15e7db1b901c5a671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac78c8b4bd167b97a37e9fe7e9e395d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#adac78c8b4bd167b97a37e9fe7e9e395d">gpib_enable_PPR</a> (int bit)</td></tr>
<tr class="separator:adac78c8b4bd167b97a37e9fe7e9e395d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7cace97c893474b3e6c672539a65041"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ae7cace97c893474b3e6c672539a65041">gpib_disable_PPR</a> (int bit)</td></tr>
<tr class="memdesc:ae7cace97c893474b3e6c672539a65041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PPR (Parallel Poll Response) for a device.  <a href="gpib_8c.html#ae7cace97c893474b3e6c672539a65041">More...</a><br /></td></tr>
<tr class="separator:ae7cace97c893474b3e6c672539a65041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa86c792f901cc028cb9dc37f57cbcf72"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#aa86c792f901cc028cb9dc37f57cbcf72">gpib_detect_PP</a> ()</td></tr>
<tr class="memdesc:aa86c792f901cc028cb9dc37f57cbcf72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to detect the Parallel Poll Reposnse state Used only for debugging - it is unlikely that we will catch this state V2 hardware - this does not work unless reading BUS.  <a href="gpib_8c.html#aa86c792f901cc028cb9dc37f57cbcf72">More...</a><br /></td></tr>
<tr class="separator:aa86c792f901cc028cb9dc37f57cbcf72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a">gpib_unread</a> (uint16_t ch)</td></tr>
<tr class="memdesc:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIB ungets one character and all status states.  <a href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a">More...</a><br /></td></tr>
<tr class="separator:a2fdb3d4996ff399dc2fbfcada417bb1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab903cc837f89eda3af567d071b5065"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a3ab903cc837f89eda3af567d071b5065">gpib_bus_read</a> ()</td></tr>
<tr class="memdesc:a3ab903cc837f89eda3af567d071b5065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB data BUS only.  <a href="gpib_8c.html#a3ab903cc837f89eda3af567d071b5065">More...</a><br /></td></tr>
<tr class="separator:a3ab903cc837f89eda3af567d071b5065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b50a0c9391ae9bfb4ccff7227a22fb"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ae6b50a0c9391ae9bfb4ccff7227a22fb">gpib_control_pin_read</a> ()</td></tr>
<tr class="memdesc:ae6b50a0c9391ae9bfb4ccff7227a22fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB control lines only FIXME V2 boards can only read pins enabled for read by the SN75162 FIXME We could add a test for read/write state ??  <a href="gpib_8c.html#ae6b50a0c9391ae9bfb4ccff7227a22fb">More...</a><br /></td></tr>
<tr class="separator:ae6b50a0c9391ae9bfb4ccff7227a22fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae96a3c6c1e7037385d3f03e4baa1717"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#aae96a3c6c1e7037385d3f03e4baa1717">gpib_handshake_pin_read</a> ()</td></tr>
<tr class="memdesc:aae96a3c6c1e7037385d3f03e4baa1717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read GPIB handshake lines only FIXME: V2 boards can only read pins enabled for read by the SN75162 FIXME We could add a test for read/write state ??  <a href="gpib_8c.html#aae96a3c6c1e7037385d3f03e4baa1717">More...</a><br /></td></tr>
<tr class="separator:aae96a3c6c1e7037385d3f03e4baa1717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d50cc1d56705d107e2f8fb00692e68"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ac3d50cc1d56705d107e2f8fb00692e68">gpib_write_byte</a> (uint16_t ch)</td></tr>
<tr class="memdesc:ac3d50cc1d56705d107e2f8fb00692e68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send 1 byte and control line states to GPIB BUS.  <a href="gpib_8c.html#ac3d50cc1d56705d107e2f8fb00692e68">More...</a><br /></td></tr>
<tr class="separator:ac3d50cc1d56705d107e2f8fb00692e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81625ecfb43b4df7691a80c9e2ebb837"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837">gpib_read_byte</a> (int trace)</td></tr>
<tr class="memdesc:a81625ecfb43b4df7691a80c9e2ebb837"><td class="mdescLeft">&#160;</td><td class="mdescRight">read 1 byte and control line status from GPIB BUS  <a href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837">More...</a><br /></td></tr>
<tr class="separator:a81625ecfb43b4df7691a80c9e2ebb837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b960a0e4ba7396e5511f248eea7442c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a5b960a0e4ba7396e5511f248eea7442c">gpib_decode_header</a> (<a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *fo)</td></tr>
<tr class="memdesc:a5b960a0e4ba7396e5511f248eea7442c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays help for <a class="el" href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577" title="Calls gpib_decode_str() and dosplays the result.">gpib_decode()</a> function.  <a href="gpib_8c.html#a5b960a0e4ba7396e5511f248eea7442c">More...</a><br /></td></tr>
<tr class="separator:a5b960a0e4ba7396e5511f248eea7442c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ae2e0e847432d7964a28c6faf9d3e1eee">gpib_trace_display</a> (uint16_t status, int trace_state)</td></tr>
<tr class="memdesc:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="mdescLeft">&#160;</td><td class="mdescRight">decode/display all control flags and data on the GPIB BUS  <a href="gpib_8c.html#ae2e0e847432d7964a28c6faf9d3e1eee">More...</a><br /></td></tr>
<tr class="separator:ae2e0e847432d7964a28c6faf9d3e1eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b2271a4a82b5c953bf08cf0c571577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577">gpib_decode</a> (uint16_t ch)</td></tr>
<tr class="memdesc:a37b2271a4a82b5c953bf08cf0c571577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls gpib_decode_str() and dosplays the result.  <a href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577">More...</a><br /></td></tr>
<tr class="separator:a37b2271a4a82b5c953bf08cf0c571577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f7cdca85091b3eb0eea0051a200fbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe">gpib_read_str</a> (uint8_t *buf, int size, uint16_t *status)</td></tr>
<tr class="memdesc:a67f7cdca85091b3eb0eea0051a200fbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read string from GPIB BUS - controlled by status flags.  <a href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe">More...</a><br /></td></tr>
<tr class="separator:a67f7cdca85091b3eb0eea0051a200fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe">gpib_write_str</a> (uint8_t *buf, int size, uint16_t *status)</td></tr>
<tr class="memdesc:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send string to GPIB BUS - controlled by status flags.  <a href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe">More...</a><br /></td></tr>
<tr class="separator:a1bdaac9496e7a0a3523481f2e8a2b9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a00023217d54aa8bb6473583593942869"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a00023217d54aa8bb6473583593942869">gpib_iobuff</a> [<a class="el" href="gpib_8h.html#a78f2361b60656c29cf6da26f240aaae2">GPIB_IOBUFF_LEN</a>]</td></tr>
<tr class="memdesc:a00023217d54aa8bb6473583593942869"><td class="mdescLeft">&#160;</td><td class="mdescRight">common IO buffer for <a class="el" href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe" title="Read string from GPIB BUS - controlled by status flags.">gpib_read_str()</a> and <a class="el" href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe" title="Send string to GPIB BUS - controlled by status flags.">gpib_write_str()</a>  <a href="gpib_8c.html#a00023217d54aa8bb6473583593942869">More...</a><br /></td></tr>
<tr class="separator:a00023217d54aa8bb6473583593942869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2296b83cccf9d7a3b954d18ece282bd1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a2296b83cccf9d7a3b954d18ece282bd1">gpib_unread_f</a> = 0</td></tr>
<tr class="memdesc:a2296b83cccf9d7a3b954d18ece282bd1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states.">gpib_unread()</a> flag  <a href="gpib_8c.html#a2296b83cccf9d7a3b954d18ece282bd1">More...</a><br /></td></tr>
<tr class="separator:a2296b83cccf9d7a3b954d18ece282bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8b0bbe03e4f62aa8e736a9a1f5f609"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a8f8b0bbe03e4f62aa8e736a9a1f5f609">gpib_unread_data</a></td></tr>
<tr class="memdesc:a8f8b0bbe03e4f62aa8e736a9a1f5f609"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states.">gpib_unread()</a> data  <a href="gpib_8c.html#a8f8b0bbe03e4f62aa8e736a9a1f5f609">More...</a><br /></td></tr>
<tr class="separator:a8f8b0bbe03e4f62aa8e736a9a1f5f609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef501d1e292f230efac5ed0cddf90e8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#acef501d1e292f230efac5ed0cddf90e8">talking</a></td></tr>
<tr class="memdesc:acef501d1e292f230efac5ed0cddf90e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib talk address  <a href="gpib_8c.html#acef501d1e292f230efac5ed0cddf90e8">More...</a><br /></td></tr>
<tr class="separator:acef501d1e292f230efac5ed0cddf90e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f34b1ce42fbf3391219cfedde825495"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a8f34b1ce42fbf3391219cfedde825495">talking_last</a></td></tr>
<tr class="memdesc:a8f34b1ce42fbf3391219cfedde825495"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib last talk address  <a href="gpib_8c.html#a8f34b1ce42fbf3391219cfedde825495">More...</a><br /></td></tr>
<tr class="separator:a8f34b1ce42fbf3391219cfedde825495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a906eb6f6a81521d91f73f9ab2e03b02e">listening</a></td></tr>
<tr class="memdesc:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib listen address  <a href="gpib_8c.html#a906eb6f6a81521d91f73f9ab2e03b02e">More...</a><br /></td></tr>
<tr class="separator:a906eb6f6a81521d91f73f9ab2e03b02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049cdc383eed2f97e4384a5728c00123"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a049cdc383eed2f97e4384a5728c00123">listening_last</a></td></tr>
<tr class="memdesc:a049cdc383eed2f97e4384a5728c00123"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib last listen address  <a href="gpib_8c.html#a049cdc383eed2f97e4384a5728c00123">More...</a><br /></td></tr>
<tr class="separator:a049cdc383eed2f97e4384a5728c00123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a0205f89c3878a7a6cb4ee1f75de35fb3">spoll</a></td></tr>
<tr class="memdesc:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib serial poll status  <a href="gpib_8c.html#a0205f89c3878a7a6cb4ee1f75de35fb3">More...</a><br /></td></tr>
<tr class="separator:a0205f89c3878a7a6cb4ee1f75de35fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#ab8bc74192b6d8a3e352b03e724dac5b7">lastcmd</a></td></tr>
<tr class="memdesc:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib current and last command  <a href="gpib_8c.html#ab8bc74192b6d8a3e352b03e724dac5b7">More...</a><br /></td></tr>
<tr class="separator:ab8bc74192b6d8a3e352b03e724dac5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad5615d233044464c3661481a6760cd"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#aaad5615d233044464c3661481a6760cd">current</a></td></tr>
<tr class="separator:aaad5615d233044464c3661481a6760cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25538708e408bbc21b380cb6f709f5d8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a25538708e408bbc21b380cb6f709f5d8">secondary</a></td></tr>
<tr class="memdesc:a25538708e408bbc21b380cb6f709f5d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gpib secondary  <a href="gpib_8c.html#a25538708e408bbc21b380cb6f709f5d8">More...</a><br /></td></tr>
<tr class="separator:a25538708e408bbc21b380cb6f709f5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328e100f7097be6b8c513858327ce279"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgpib__token__t.html">gpib_token_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gpib_8c.html#a328e100f7097be6b8c513858327ce279">gpib_tokens</a> []</td></tr>
<tr class="separator:a328e100f7097be6b8c513858327ce279"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GPIB emulator for HP85 disk emulator project for AVR. </p>
<dl class="section user"><dt>Edit History - [1.0] [Mike Gore] Initial revision of file.</dt><dd></dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014-2020 Mike Gore, All rights reserved. GPL</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://github.com/magore/hp85disk">http://github.com/magore/hp85disk</a> </dd>
<dd>
<a href="http://github.com/magore/hp85disk/COPYRIGHT.md">http://github.com/magore/hp85disk/COPYRIGHT.md</a> for Copyright details</dd></dl>
<dl class="section user"><dt>Based on work by Anders Gustafsson.</dt><dd></dd></dl>
<dl class="section user"><dt>Copyright &copy; 2014 Anders Gustafsson All rights reserved..</dt><dd></dd></dl>

<p class="definition">Definition in file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac28f9b1b4f9a2755255b880b63876593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28f9b1b4f9a2755255b880b63876593">&#9670;&nbsp;</a></span>gpib_bus_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_bus_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize/Release GPIB Bus control lines Used for Power ON, Reset or IFC LOW reset conditions. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<p>FIXME verify resetting gpib_unread_f is ALWAYS correct when called</p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00229">229</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00340">gpib_init_devices()</a>, <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>, and <a class="el" href="main_8c_source.html#l00507">main()</a>.</p>

</div>
</div>
<a id="a3ab903cc837f89eda3af567d071b5065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab903cc837f89eda3af567d071b5065">&#9670;&nbsp;</a></span>gpib_bus_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_bus_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB data BUS only. </p>
<dl class="section return"><dt>Returns</dt><dd>bus (lower 8 bits) </dd></dl>
<p>if a command byte (ATN low) then strip partity</p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00562">562</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>.</p>

</div>
</div>
<a id="ae6b50a0c9391ae9bfb4ccff7227a22fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6b50a0c9391ae9bfb4ccff7227a22fb">&#9670;&nbsp;</a></span>gpib_control_pin_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_control_pin_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB control lines only FIXME V2 boards can only read pins enabled for read by the SN75162 FIXME We could add a test for read/write state ?? </p>
<dl class="section return"><dt>Returns</dt><dd>control lines (upper 8 bits) </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8c.html#a354056604783f9020f1494c1e3c6fb64" title="Initialize GPIB Bus control lines for READ.">gpib_rx_init()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00580">580</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>.</p>

</div>
</div>
<a id="a37b2271a4a82b5c953bf08cf0c571577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b2271a4a82b5c953bf08cf0c571577">&#9670;&nbsp;</a></span>gpib_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_decode </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls gpib_decode_str() and dosplays the result. </p>
<p>Display: decode/display all control flags and data on GPIB BUS. </p><dl class="section see"><dt>See also</dt><dd>gpib_decode_str() </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l01266">1266</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l01307">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00456">gpib_task()</a>, <a class="el" href="gpib__task_8c_source.html#l00200">gpib_trace_task()</a>, and <a class="el" href="gpib_8c_source.html#l01396">gpib_write_str()</a>.</p>

</div>
</div>
<a id="a5b960a0e4ba7396e5511f248eea7442c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b960a0e4ba7396e5511f248eea7442c">&#9670;&nbsp;</a></span>gpib_decode_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_decode_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *&#160;</td>
          <td class="paramname"><em>fo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays help for <a class="el" href="gpib_8c.html#a37b2271a4a82b5c953bf08cf0c571577" title="Calls gpib_decode_str() and dosplays the result.">gpib_decode()</a> function. </p>
<p>You would call this once at the start of a trace for example. </p><dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list is control <a class="el" href="drives_8c.html#a9921ae02cadccc99dd6c3a9b68be050a" title="Config file line number.">lines</a> we track </dd>
<dd>
: gpib_trace() </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fo</td><td>FILE pointer or "stdout" </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l01082">1082</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00200">gpib_trace_task()</a>.</p>

</div>
</div>
<a id="aa86c792f901cc028cb9dc37f57cbcf72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa86c792f901cc028cb9dc37f57cbcf72">&#9670;&nbsp;</a></span>gpib_detect_PP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_detect_PP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to detect the Parallel Poll Reposnse state Used only for debugging - it is unlikely that we will catch this state V2 hardware - this does not work unless reading BUS. </p>
<ul>
<li>PPR is short for "Parellel Poll Response"</li>
<li>PPR happens when the CIC (controller in charge) holds BOTH of ATN == 0 and EOI == 0</li>
<li>PPR Response happens using hardware The hardware pulls a bit low on the GPIB bus corresponding to the device. But only if any PPR mask bits are set in the hardware</li>
<li>Note: EOI is never used in command mode (ATN = 0) 1) Hardware will automatically hold GPIB DATA BUS lines low</li>
<li><a class="el" href="gpib__hal_8c.html#a639fcfaa605f43d589798545d9d1a975" title="Return PPR enable register.">ppr_reg()</a> determines if we have PPR enabled.</li>
<li>References:<ul>
<li>SS80 pg 3-4, section 3-3 <dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8c.html#adac78c8b4bd167b97a37e9fe7e9e395d">gpib_enable_PPR()</a> </dd>
<dd>
<a class="el" href="gpib_8c.html#ae7cace97c893474b3e6c672539a65041" title="Disable PPR (Parallel Poll Response) for a device.">gpib_disable_PPR()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>1 if we see a PPR, 0 if not </dd></dl>
</li>
</ul>
</li>
</ul>
<p>FIXME we can only read EOI in bus READ mode</p>
<p>Bus pin states but do not alter port direction state</p>
<p>debugging - read the ddr data direction bits to determine read/write state</p>
<p>FIXME we can only read EOI in bus READ mode FIXME We add a test for read/write state ??</p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00469">469</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>.</p>

</div>
</div>
<a id="ae7cace97c893474b3e6c672539a65041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7cace97c893474b3e6c672539a65041">&#9670;&nbsp;</a></span>gpib_disable_PPR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_disable_PPR </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PPR (Parallel Poll Response) for a device. </p>
<ul>
<li>Reference: SS80 pg 3-4, section 3-3 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00436">436</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00888">GPIB_SECONDARY_ADDRESS()</a>, <a class="el" href="ss80_8c_source.html#l01047">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l01929">SS80_COMMANDS()</a>, <a class="el" href="ss80_8c_source.html#l00306">SS80_Execute_State()</a>, <a class="el" href="ss80_8c_source.html#l00275">SS80_init()</a>, and <a class="el" href="ss80_8c_source.html#l01442">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a id="adac78c8b4bd167b97a37e9fe7e9e395d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac78c8b4bd167b97a37e9fe7e9e395d">&#9670;&nbsp;</a></span>gpib_enable_PPR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_enable_PPR </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Reference: SS80 pg 3-4, section 3-3 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00416">416</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ss80_8c_source.html#l01831">SS80_Amigo_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01865">SS80_Cancel()</a>, <a class="el" href="ss80_8c_source.html#l01775">SS80_Channel_Independent_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01047">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00306">SS80_Execute_State()</a>, <a class="el" href="ss80_8c_source.html#l01811">SS80_Selected_Device_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01442">SS80_Transparent_State()</a>, and <a class="el" href="ss80_8c_source.html#l01793">SS80_Universal_Device_Clear()</a>.</p>

</div>
</div>
<a id="aae96a3c6c1e7037385d3f03e4baa1717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae96a3c6c1e7037385d3f03e4baa1717">&#9670;&nbsp;</a></span>gpib_handshake_pin_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_handshake_pin_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read GPIB handshake lines only FIXME: V2 boards can only read pins enabled for read by the SN75162 FIXME We could add a test for read/write state ?? </p>
<dl class="section return"><dt>Returns</dt><dd>handshake lines (upper 8 bits) </dd></dl>
<p>for tracing we can reuse the error flag bit values for DAV,NRFD and NDAC FYI: This has no impact on the <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS">gpib_read_byte()</a> functions and return values</p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00601">601</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>.</p>

</div>
</div>
<a id="a81625ecfb43b4df7691a80c9e2ebb837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81625ecfb43b4df7691a80c9e2ebb837">&#9670;&nbsp;</a></span>gpib_read_byte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_read_byte </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read 1 byte and control line status from GPIB BUS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trace</td><td>if non-zero do full bus handshake trace of read</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>References: HP-IB Tutorial pg 13, 14.</li>
<li>Notes: Their diagram is a bit misleading - they start in the BUS init phase. The init happens much earlier in other code - we NEVER want to do that here or bad things will happen - we could step on the sender NRFD test and false trigger it. We instead start with NRFD FLOAT, and NDAC LOW. See loop in send diagram it has NDAC == 0 and NRFD == 1 in the return to send (beginning) part of the loop.</li>
<li>The HP-IB reference has an error: Read ready actually starts when NRFD = 1 and NDAC = 0. If you look at the Write state diagram that can be confirmed.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags.">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>(data bus, control and error status) </dd></dl>
<p>V2 boards can NOT read ALL bits on the control bus at once</p>
<p>DAV must be high</p>
<p>V2 boards can NOT read all control bits at once NRFD,NDAC and SRQ are cirrently outputs</p>
<p>Wait for DAV HI</p>
<p>Ready for next byte</p>
<p>V2 boards can not read all control and handshake bits at once FIXME We could add a test for read/write state ?? NRFD,NDAC SRQ are outputs durring write phase, but not at very start</p>
<p>Note: see: HP-IB Tutorial pg 13</p><ul>
<li>Remember that NDAC and NRFD are now both LOW!</li>
<li>The spec says to KEEP BOTH LOW when NOT ready to read otherwise we may miss a transfer and cause a controller timeout!</li>
<li>GPIB TX state expects NRFD LOW on entry or it is an ERROR!</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00875">875</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l01307">gpib_read_str()</a>, <a class="el" href="gpib__task_8c_source.html#l00456">gpib_task()</a>, and <a class="el" href="gpib__task_8c_source.html#l00200">gpib_trace_task()</a>.</p>

</div>
</div>
<a id="a67f7cdca85091b3eb0eea0051a200fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f7cdca85091b3eb0eea0051a200fbe">&#9670;&nbsp;</a></span>gpib_read_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpib_read_str </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read string from GPIB BUS - controlled by status flags. </p>
<ul>
<li>Status flags used when reading<ul>
<li>If EOI is set then EOI detection will end reading when EOI is detected.</li>
<li>If an early or unexpected EOI is detected a warning is displayed.</li>
<li>The state of ATN controls the type of data read.<ul>
<li>If ATN is set then parity is stripped.</li>
<li>Only data matching the ATN flag state set by user is read.<ul>
<li>If we see a mismatch we "unread" it and exit.</li>
<li>Unreading saves data AND status to be reread later on.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS">gpib_read_byte()</a> </dd>
<dd>
: <a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states.">gpib_unread()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Binary gpib string to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of string we want to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>controls sending modes and returns status</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bytes read </dd>
<dd>
status</dd></dl>
<ul>
<li>Errors TIMEOUT_FLAG or IFC_FLAG will cause early exit and set status.<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li><dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list.</dd></dl>
</li>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li>EOI_FLAG</li>
<li>SRQ_FLAG</li>
<li>ATN_FLAG</li>
<li>REN_FLAG</li>
<li>PP_FLAG</li>
</ul>
</li>
<li>Error Flags:<ul>
<li>IFC_FLAG </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>TODO decode this state - for now I just set the EOI_FLAG </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l01307">1307</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ss80_8c_source.html#l01831">SS80_Amigo_Clear()</a>, <a class="el" href="ss80_8c_source.html#l01047">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00506">SS80_locate_and_write()</a>, and <a class="el" href="ss80_8c_source.html#l01442">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a id="a354056604783f9020f1494c1e3c6fb64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a354056604783f9020f1494c1e3c6fb64">&#9670;&nbsp;</a></span>gpib_rx_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_rx_init </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>busy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GPIB Bus control lines for READ. </p>
<ul>
<li>Set busy = 0 after powerup everying floating or high<ul>
<li>If busy = 1 NRFD/NDAC are set to busy low</li>
</ul>
</li>
<li>References:<ul>
<li>HP-IB Tutorial</li>
<li>HP-IB pg 8-11 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00307">307</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01396">gpib_write_str()</a>.</p>

</div>
</div>
<a id="a32d2476eec2bbdf15e7db1b901c5a671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d2476eec2bbdf15e7db1b901c5a671">&#9670;&nbsp;</a></span>gpib_state_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_state_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset GPIB states and related variables. </p>
<ul>
<li>Called at powerup and IFC or reset states.</li>
<li>Does not reset BUS <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00389">389</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00340">gpib_init_devices()</a>, and <a class="el" href="main_8c_source.html#l00507">main()</a>.</p>

</div>
</div>
<a id="a687395337dd5c6604a775e3ffd3f006f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687395337dd5c6604a775e3ffd3f006f">&#9670;&nbsp;</a></span>gpib_timeout_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timeout_set </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set GPIB timeout timer in units of GPIB_TASK_TIC_US. </p>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a3eb10b99d17dd69982b6bfc820fb29db" title="Test GPIB timeout timer for timeout condition.">gpib_timeout_test()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00207">207</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01396">gpib_write_str()</a>.</p>

</div>
</div>
<a id="a3eb10b99d17dd69982b6bfc820fb29db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb10b99d17dd69982b6bfc820fb29db">&#9670;&nbsp;</a></span>gpib_timeout_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_timeout_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test GPIB timeout timer for timeout condition. </p>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a687395337dd5c6604a775e3ffd3f006f" title="Set GPIB timeout timer in units of GPIB_TASK_TIC_US.">gpib_timeout_set()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>1 if timeout, 0 if not </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00220">220</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>, and <a class="el" href="gpib_8c_source.html#l01396">gpib_write_str()</a>.</p>

</div>
</div>
<a id="a6a3c1941e17626338b878123677ae797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3c1941e17626338b878123677ae797">&#9670;&nbsp;</a></span>gpib_timer_elapsed_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_elapsed_begin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start measuring time - used with hpib_timer_elapsed_end() </p>
<p>See <a class="el" href="gpib__hal_8c.html" title="GPIB emulator hardwware layer for HP85 disk emulator project for AVR.">gpib_hal.c</a> for CPU specific code Provide Elapsed timer and Timeout timer - both in Microseconds We use the lower level clock elapsed timer functions here </p><dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00133">133</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00469">gpib_detect_PP()</a>, <a class="el" href="gpib__tests_8c_source.html#l00063">gpib_tests()</a>, <a class="el" href="ss80_8c_source.html#l00374">SS80_locate_and_read()</a>, and <a class="el" href="ss80_8c_source.html#l00506">SS80_locate_and_write()</a>.</p>

</div>
</div>
<a id="a87ae4b4852f4a1987fc61fec20f53d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87ae4b4852f4a1987fc61fec20f53d42">&#9670;&nbsp;</a></span>gpib_timer_elapsed_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_elapsed_end </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display user message and time delta since <a class="el" href="gpib_8c.html#a6a3c1941e17626338b878123677ae797" title="Start measuring time - used with hpib_timer_elapsed_end()">gpib_timer_elapsed_begin()</a> call. </p>
<p>Display a message </p><dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00164">164</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00469">gpib_detect_PP()</a>, <a class="el" href="gpib__tests_8c_source.html#l00063">gpib_tests()</a>, <a class="el" href="ss80_8c_source.html#l00374">SS80_locate_and_read()</a>, and <a class="el" href="ss80_8c_source.html#l00506">SS80_locate_and_write()</a>.</p>

</div>
</div>
<a id="abe05115c27148ec7013e6f62dc94ae78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe05115c27148ec7013e6f62dc94ae78">&#9670;&nbsp;</a></span>gpib_timer_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset elapsed and timeout timers Elapses and Timeout Timers. </p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00150">150</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__hal_8c_source.html#l00029">gpib_timer_init()</a>.</p>

</div>
</div>
<a id="ae9291b22beebb9d24354af643505f9cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9291b22beebb9d24354af643505f9cd">&#9670;&nbsp;</a></span>gpib_timer_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_timer_task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main GPIB timer task called by low level interrup hander. </p>
<ul>
<li>Provides Down timers and Elapsed timers</li>
<li>Called every GPIB_TASK_TIC_US Micro Seconds <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00190">190</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__hal_8c_source.html#l00029">gpib_timer_init()</a>.</p>

</div>
</div>
<a id="ae2e0e847432d7964a28c6faf9d3e1eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e0e847432d7964a28c6faf9d3e1eee">&#9670;&nbsp;</a></span>gpib_trace_display()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_trace_display </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trace_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>decode/display all control flags and data on the GPIB BUS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>data bus value (lower 8 bits) control bus (upper 8 bits) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trace_state</td><td>level of trace detail TRACE_DISABLE = normal bus and control status report from read state only TRACE_READ = trace bus and control reporting from read state only TRACE_BUS = trace control reporting from all non-read states, data bus values are omiited Note: trace states add DAV,NRFD,NDAC and ommit PPR status, BUS error and timeout given that <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS">gpib_read_byte()</a> report these anyway<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags.">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>string pointer to store the decoded result in.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#a81625ecfb43b4df7691a80c9e2ebb837" title="read 1 byte and control line status from GPIB BUS">gpib_read_byte()</a> </dd>
<dd>
: gpib_write_byte(int ch) </dd>
<dd>
: <a class="el" href="gpib_8c.html#a5b960a0e4ba7396e5511f248eea7442c" title="Displays help for gpib_decode() function.">gpib_decode_header()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void Note the bits we can read depends on what hardware verions we have V2 hardware can only read status bits based on GPIB control buffer direction FIXME We could add a test for read/write state ?? </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l01135">1135</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l01266">gpib_decode()</a>, and <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>.</p>

</div>
</div>
<a id="a741b786d57a31d4e4d6e8ea99dd8cc3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a741b786d57a31d4e4d6e8ea99dd8cc3d">&#9670;&nbsp;</a></span>gpib_tx_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_tx_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GPIB Bus control lines for WRITE. </p>
<ul>
<li>Set busy = 0 after powerup everying floating or high<ul>
<li>If busy = 1 NRFD/NDAC are set to busy low</li>
</ul>
</li>
<li>References:<ul>
<li>HP-IB Tutorial</li>
<li>HP-IB pg 8-11 <dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
</li>
</ul>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00364">364</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>.</p>

</div>
</div>
<a id="a2fdb3d4996ff399dc2fbfcada417bb1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fdb3d4996ff399dc2fbfcada417bb1a">&#9670;&nbsp;</a></span>gpib_unread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_unread </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIB ungets one character and all status states. </p>
<p>Pushes a character back into the read buffer </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors present.<ul>
<li></li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ch </dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00544">544</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00371">GPIB_COMMANDS()</a>, and <a class="el" href="gpib_8c_source.html#l01307">gpib_read_str()</a>.</p>

</div>
</div>
<a id="a8824827cf2979219e9a65ead803647e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8824827cf2979219e9a65ead803647e6">&#9670;&nbsp;</a></span>gpib_user_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gpib_user_task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>user task called in GPIB read/write byte functions </p>
<ul>
<li>References: Documenation and related sources of information<ul>
<li>Web Resources:<ul>
<li><a href="http://www.hp9845.net">http://www.hp9845.net</a></li>
<li><a href="http://www.hpmuseum.net">http://www.hpmuseum.net</a></li>
<li><a href="http://www.hpmusuem.org">http://www.hpmusuem.org</a></li>
<li><a href="http://bitsavers.trailing-edge.com">http://bitsavers.trailing-edge.com</a></li>
<li><a href="http://en.wikipedia.org/wiki/IEEE-488">http://en.wikipedia.org/wiki/IEEE-488</a></li>
</ul>
</li>
</ul>
</li>
<li>SS80 References:<ul>
<li>"SS80" is the short form used in the project</li>
<li>"Subset 80 from Fixed and flexible disc drives"</li>
<li>Printed November, 1985</li>
<li>HP Part# 5958-4129</li>
</ul>
</li>
<li>CS80 References:<ul>
<li>"CS80" is the short form used in the project</li>
<li>"CS/80 Instruction Set Programming Manual"</li>
<li>Printed: APR 1983</li>
<li>HP Part# 5955-3442</li>
</ul>
</li>
<li>Amigo References:<ul>
<li>"Amigo" is the short form used in the project</li>
<li>"Appendix A of 9895A Flexible Disc Memory Service Manual"</li>
<li>HP Part# 09895-90030</li>
</ul>
</li>
<li>HP-IB<ul>
<li>"HP-IB" is the short form used in the project</li>
<li>"Condensed Description of the Hewlett Packard Interface Bus"</li>
<li>Printed March 1975</li>
<li>HP Part# 59401-90030</li>
</ul>
</li>
<li>Tutorial Description of The Hewllet Packard Interface Bus"
  - "HP-IB Tutorial" is the short form used in the project<ul>
<li><a href="http://www.hpmemory.org/an/pdf/hp-ib_tutorial_1980.pdf">http://www.hpmemory.org/an/pdf/hp-ib_tutorial_1980.pdf</a><ul>
<li>Printed January 1983</li>
</ul>
</li>
<li><a href="http://www.ko4bb.com/Manuals/HP_Agilent/HPIB_tutorial_HP.pdf">http://www.ko4bb.com/Manuals/HP_Agilent/HPIB_tutorial_HP.pdf</a><ul>
<li>Printed 1987</li>
</ul>
</li>
</ul>
</li>
<li>GPIB / IEEE 488 Tutorial by Ian Poole<ul>
<li><a href="http://www.radio-electronics.com/info/t_and_m/gpib/ieee488-basics-tutorial.php">http://www.radio-electronics.com/info/t_and_m/gpib/ieee488-basics-tutorial.php</a></li>
</ul>
</li>
</ul>
<p>user task called in GPIB read/write byte functions</p>
<p>====================================== ====================================== </p>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00236">236</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00655">gpib_write_byte()</a>.</p>

</div>
</div>
<a id="ac3d50cc1d56705d107e2f8fb00692e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3d50cc1d56705d107e2f8fb00692e68">&#9670;&nbsp;</a></span>gpib_write_byte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_write_byte </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send 1 byte and control line states to GPIB BUS. </p>
<ul>
<li><b>NOTE We are ONLY called via gpib_write_str</b></li>
<li>We have been addressed by the active controller to talk We always arrive here in READ read state.<ul>
<li>Any error flags set on return imply the data was not likely sent</li>
<li>You can OR the control flags ATN_FLAG, EOI_FLAG with (ch) to send them these states.</li>
<li>Results can be displayed for debugging with the decode(ch) funnction</li>
<li>We always exit with NRFD and NDAC LOW</li>
</ul>
</li>
<li>References: HP-IB Tutorial pg13. HP-IB Tutorial pg 13 for the receive and send control line states Correction: The send routine MUST also wait for NDAC LOW before exit. (You can verify this by checking the receive part of the handshake diagram just before it returns to the start of the loop) Failing to wait will cause problems that may masqurade as timing issues.</li>
<li>(It caused problems with my HP85 before I added the code)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ch</td><td>( Data or Command ) and control flags<ul>
<li>Upper 8 bits: contril flags</li>
<li>Flags:<ul>
<li>EOI_FLAG</li>
<li>ATN_FLAG<ul>
<li>EOI and ATN can only be used in controller mode</li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li></li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list.<ul>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li><a class="el" href="gpib_8h.html#ab6e601afadf8d274d9d341323a5c6a3e" title="bus flags">EOI_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#aadec0e361e7d2ed6a82ef28bee7231f6">SRQ_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#abbe287946c2beaa1f76fe5be364c07ad">ATN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#ac5ae85572f7432aaab806c29177eec8d">REN_FLAG</a></li>
<li><a class="el" href="gpib_8h.html#a660f399a9ffcc5c666bcc726073338cb" title="BUS state flags.">PP_FLAG</a></li>
</ul>
</li>
<li>Error Flags:<ul>
<li><a class="el" href="gpib_8h.html#a0202c6cc39130a2c251235ef2336cd13">IFC_FLAG</a> </li>
</ul>
</li>
</ul>
</dd></dl>
<p>ALL devices are ready</p>
<p>@release BUS</p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00655">655</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l01396">gpib_write_str()</a>.</p>

</div>
</div>
<a id="a1bdaac9496e7a0a3523481f2e8a2b9fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bdaac9496e7a0a3523481f2e8a2b9fe">&#9670;&nbsp;</a></span>gpib_write_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpib_write_str </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send string to GPIB BUS - controlled by status flags. </p>
<ul>
<li>Status flags used when sending<ul>
<li>If EOI is set then EOI is sent at last character</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Binary gpib string to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>User status flags that control the sending process.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bytes sent<ul>
<li>will match size on success (no other tests needed).</li>
<li>Any size mismatch impiles error flags IFC_FLAG and TIMEOUT_FLAG.</li>
</ul>
</dd></dl>
<ul>
<li>Errors TIMEOUT_FLAG or IFC_FLAG will cause early exit and set status.<ul>
<li>Lower 8 bits: Data or Command.<ul>
<li>If ATN is LOW then we strip parity from the byte.</li>
</ul>
</li>
<li>Upper 8 bits: Status and Errors.<ul>
<li><dl class="section see"><dt>See also</dt><dd><a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list.</dd></dl>
</li>
<li>An error implies the data byte can't be trusted</li>
<li>Control Line Flags.<ul>
<li>EOI_FLAG</li>
<li>SRQ_FLAG</li>
<li>ATN_FLAG</li>
<li>REN_FLAG</li>
<li>PP_FLAG</li>
</ul>
</li>
<li>Error Flags:<ul>
<li>IFC_FLAG <dl class="section see"><dt>See also</dt><dd>: <a class="el" href="gpib_8c.html#ac3d50cc1d56705d107e2f8fb00692e68" title="Send 1 byte and control line states to GPIB BUS.">gpib_write_byte()</a> </dd>
<dd>
: <a class="el" href="gpib_8h.html" title="GPIB emulator for HP85 disk emulator project for AVR.">gpib.h</a> _FLAGS defines for a full list) </dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Returns</dd></dl>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l01396">1396</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00586">Send_Identify()</a>, <a class="el" href="ss80_8c_source.html#l00929">SS80_describe()</a>, <a class="el" href="ss80_8c_source.html#l01898">SS80_error_return()</a>, <a class="el" href="ss80_8c_source.html#l00374">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l01641">SS80_Report()</a>, and <a class="el" href="ss80_8c_source.html#l00854">SS80_send_status()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aaad5615d233044464c3661481a6760cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad5615d233044464c3661481a6760cd">&#9670;&nbsp;</a></span>current</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t current</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00097">97</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="timer_8c_source.html#l00200">clock_elapsed_end()</a>, <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>.</p>

</div>
</div>
<a id="a00023217d54aa8bb6473583593942869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00023217d54aa8bb6473583593942869">&#9670;&nbsp;</a></span>gpib_iobuff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_iobuff[<a class="el" href="gpib_8h.html#a78f2361b60656c29cf6da26f240aaae2">GPIB_IOBUFF_LEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>common IO buffer for <a class="el" href="gpib_8c.html#a67f7cdca85091b3eb0eea0051a200fbe" title="Read string from GPIB BUS - controlled by status flags.">gpib_read_str()</a> and <a class="el" href="gpib_8c.html#a1bdaac9496e7a0a3523481f2e8a2b9fe" title="Send string to GPIB BUS - controlled by status flags.">gpib_write_str()</a> </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00077">77</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ss80_8c_source.html#l01047">SS80_Command_State()</a>, <a class="el" href="ss80_8c_source.html#l00374">SS80_locate_and_read()</a>, <a class="el" href="ss80_8c_source.html#l00506">SS80_locate_and_write()</a>, and <a class="el" href="ss80_8c_source.html#l01442">SS80_Transparent_State()</a>.</p>

</div>
</div>
<a id="a328e100f7097be6b8c513858327ce279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a328e100f7097be6b8c513858327ce279">&#9670;&nbsp;</a></span>gpib_tokens</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgpib__token__t.html">gpib_token_t</a> gpib_tokens[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    {0x01,<span class="stringliteral">&quot;GTL&quot;</span> },</div>
<div class="line">    {0x04,<span class="stringliteral">&quot;SDC&quot;</span> },</div>
<div class="line">    {0x05,<span class="stringliteral">&quot;PPC&quot;</span> },</div>
<div class="line">    {0x08,<span class="stringliteral">&quot;GET&quot;</span> },</div>
<div class="line">    {0x09,<span class="stringliteral">&quot;TCT&quot;</span> },</div>
<div class="line">    {0x11,<span class="stringliteral">&quot;LLO&quot;</span> },</div>
<div class="line">    {0x14,<span class="stringliteral">&quot;DCL&quot;</span> },</div>
<div class="line">    {0x15,<span class="stringliteral">&quot;PPU&quot;</span> },</div>
<div class="line">    {0x18,<span class="stringliteral">&quot;SPE&quot;</span> },</div>
<div class="line">    {0x19,<span class="stringliteral">&quot;SPD&quot;</span> },</div>
<div class="line">    {0x3F,<span class="stringliteral">&quot;UNL&quot;</span> },</div>
<div class="line">    {0x5F,<span class="stringliteral">&quot;UNT&quot;</span> },</div>
<div class="line">    {-1,<a class="code" href="hardware_2user__config_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00109">109</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l01135">gpib_trace_display()</a>.</p>

</div>
</div>
<a id="a8f8b0bbe03e4f62aa8e736a9a1f5f609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f8b0bbe03e4f62aa8e736a9a1f5f609">&#9670;&nbsp;</a></span>gpib_unread_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gpib_unread_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states.">gpib_unread()</a> data </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00082">82</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00544">gpib_unread()</a>.</p>

</div>
</div>
<a id="a2296b83cccf9d7a3b954d18ece282bd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2296b83cccf9d7a3b954d18ece282bd1">&#9670;&nbsp;</a></span>gpib_unread_f</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gpib_unread_f = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="gpib_8c.html#a2fdb3d4996ff399dc2fbfcada417bb1a" title="GPIB ungets one character and all status states.">gpib_unread()</a> flag </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00080">80</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00229">gpib_bus_init()</a>, <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, and <a class="el" href="gpib_8c_source.html#l00544">gpib_unread()</a>.</p>

</div>
</div>
<a id="ab8bc74192b6d8a3e352b03e724dac5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bc74192b6d8a3e352b03e724dac5b7">&#9670;&nbsp;</a></span>lastcmd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t lastcmd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib current and last command </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00097">97</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00734">GPIB_LISTEN()</a>, <a class="el" href="gpib_8c_source.html#l00875">gpib_read_byte()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00456">gpib_task()</a>.</p>

</div>
</div>
<a id="a906eb6f6a81521d91f73f9ab2e03b02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906eb6f6a81521d91f73f9ab2e03b02e">&#9670;&nbsp;</a></span>listening</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t listening</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib listen address </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00090">90</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00619">GPIB()</a>, <a class="el" href="gpib__task_8c_source.html#l00371">GPIB_COMMANDS()</a>, <a class="el" href="gpib__task_8c_source.html#l00734">GPIB_LISTEN()</a>, <a class="el" href="gpib__task_8c_source.html#l00888">GPIB_SECONDARY_ADDRESS()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, <a class="el" href="gpib__task_8c_source.html#l00809">GPIB_TALK()</a>, <a class="el" href="gpib__task_8c_source.html#l00456">gpib_task()</a>, <a class="el" href="printer_8c_source.html#l00227">PRINTER_COMMANDS()</a>, and <a class="el" href="ss80_8c_source.html#l01929">SS80_COMMANDS()</a>.</p>

</div>
</div>
<a id="a049cdc383eed2f97e4384a5728c00123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a049cdc383eed2f97e4384a5728c00123">&#9670;&nbsp;</a></span>listening_last</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t listening_last</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib last listen address </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00092">92</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00734">GPIB_LISTEN()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00940">listen_cleanup()</a>.</p>

</div>
</div>
<a id="a25538708e408bbc21b380cb6f709f5d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25538708e408bbc21b380cb6f709f5d8">&#9670;&nbsp;</a></span>secondary</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t secondary</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib secondary </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00100">100</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00371">GPIB_COMMANDS()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00456">gpib_task()</a>.</p>

</div>
</div>
<a id="a0205f89c3878a7a6cb4ee1f75de35fb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0205f89c3878a7a6cb4ee1f75de35fb3">&#9670;&nbsp;</a></span>spoll</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t spoll</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib serial poll status </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00095">95</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00619">GPIB()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00809">GPIB_TALK()</a>.</p>

</div>
</div>
<a id="acef501d1e292f230efac5ed0cddf90e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef501d1e292f230efac5ed0cddf90e8">&#9670;&nbsp;</a></span>talking</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t talking</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib talk address </p>
<p>GPIB BUS states. </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00085">85</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib__task_8c_source.html#l00619">GPIB()</a>, <a class="el" href="gpib__task_8c_source.html#l00371">GPIB_COMMANDS()</a>, <a class="el" href="gpib__task_8c_source.html#l00734">GPIB_LISTEN()</a>, <a class="el" href="gpib__task_8c_source.html#l00888">GPIB_SECONDARY_ADDRESS()</a>, <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, <a class="el" href="gpib__task_8c_source.html#l00809">GPIB_TALK()</a>, <a class="el" href="printer_8c_source.html#l00227">PRINTER_COMMANDS()</a>, and <a class="el" href="ss80_8c_source.html#l01929">SS80_COMMANDS()</a>.</p>

</div>
</div>
<a id="a8f34b1ce42fbf3391219cfedde825495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f34b1ce42fbf3391219cfedde825495">&#9670;&nbsp;</a></span>talking_last</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t talking_last</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gpib last talk address </p>

<p class="definition">Definition at line <a class="el" href="gpib_8c_source.html#l00087">87</a> of file <a class="el" href="gpib_8c_source.html">gpib.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gpib_8c_source.html#l00389">gpib_state_init()</a>, and <a class="el" href="gpib__task_8c_source.html#l00809">GPIB_TALK()</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="ahardware_2user__config_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="hardware_2user__config_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="hardware_2user__config_8h_source.html#l00085">user_config.h:85</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 7 2020 16:26:42 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
