\hypertarget{drives_8c}{}\doxysection{gpib/drives.c File Reference}
\label{drives_8c}\index{gpib/drives.c@{gpib/drives.c}}


drive definitions for H\+P85 disk emulator project for A\+VR.  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}drives.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpib\+\_\+hal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpib.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpib\+\_\+task.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}amigo.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ss80.\+h\char`\"{}}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include \char`\"{}lifutils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{drives_8c_af24298a5ce56647751e432673282c6e2}{M\+A\+X\+\_\+\+S\+T\+A\+CK}}~5
\begin{DoxyCompactList}\small\item\em Config Parser Stack. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{drives_8c_ab0cc4deddae206c7762399a8d54856e1}{print\+\_\+var\+\_\+P}} (\mbox{\hyperlink{mathio_8h_a9306b0c3083933632aca02ebb1fe14d5}{\+\_\+\+\_\+memx}} const char $\ast$str, uint32\+\_\+t val)
\begin{DoxyCompactList}\small\item\em Display Configuration File variable. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a3da86aaab90b0d4bb14f79e296a155bb}{print\+\_\+str\+\_\+P}} (\mbox{\hyperlink{mathio_8h_a9306b0c3083933632aca02ebb1fe14d5}{\+\_\+\+\_\+memx}} const char $\ast$str, char $\ast$arg)
\begin{DoxyCompactList}\small\item\em Display Configuration File string. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a0e9716dd73ee22a2b9ea645df8fa10c8}{tok\+\_\+index}} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em return the tokens index of the matching string \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{drives_8c_a6494bcb31d494b6522598cbe1a293c9e}{tok\+\_\+name}} (uint8\+\_\+t tok)
\begin{DoxyCompactList}\small\item\em return string of matching token \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a939e51554e79e0a0871299a063b04cd0}{print\+\_\+tok\+\_\+val}} (uint8\+\_\+t tok, uint8\+\_\+t spaces, uint32\+\_\+t val)
\begin{DoxyCompactList}\small\item\em Display Configuration File variable. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a0420433bf4bbb957a00a4aa83bdcf02a}{print\+\_\+tok\+\_\+str}} (uint8\+\_\+t tok, uint8\+\_\+t spaces, char $\ast$str)
\begin{DoxyCompactList}\small\item\em Display Configuration File variable. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a5a42638642898b6c3433591e1ae5e8c3}{print\+\_\+tok}} (uint8\+\_\+t tok, uint8\+\_\+t spaces)
\begin{DoxyCompactList}\small\item\em Display Configuration File variable. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{drives_8c_ab0ea5b4d5a144a8ab1c1d2c9b08aa21f}{Read\+\_\+\+Config}} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Read and parse a config file using P\+O\+S\+IX functions Set all drive parameters and debuglevel. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a31147d548df5d8a7674b0a50f35accac}{display\+\_\+\+Addresses}} (int verbose)
\begin{DoxyCompactList}\small\item\em Display Configuration device address saummary. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a226919985bc5fcb9a6fc250d94e5a393}{display\+\_\+\+Config}} (int verbose)
\begin{DoxyCompactList}\small\item\em Display current Configuration File values. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a9a42c5f4d02b83c4a7cee53139b3c70d}{find\+\_\+type}} (int type)
\begin{DoxyCompactList}\small\item\em Seach Devices\mbox{[}\mbox{]} for A\+NY definitions of a disk type. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a16cebc504495fa2ce1533329d89ec900}{count\+\_\+drive\+\_\+types}} (uint8\+\_\+t type)
\begin{DoxyCompactList}\small\item\em Count number of devices of a sertain type. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{drives_8c_aa43e282b0ff4a2e5b2ce59f0fce3fb68}{type\+\_\+to\+\_\+str}} (int type)
\begin{DoxyCompactList}\small\item\em Convert a disk type into a string. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{drives_8c_ac1a2445dba59c3eb47276b37107c6f64}{base\+\_\+to\+\_\+str}} (int base)
\begin{DoxyCompactList}\small\item\em Convert base address into a string identifier. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_ae91f9eb2b227952368b870d702ed5655}{find\+\_\+free}} ()
\begin{DoxyCompactList}\small\item\em Find first free Devices\mbox{[}\mbox{]} slot. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_ac29ead2d44b6f45ac521ec75ed3c0849}{find\+\_\+device}} (int type, int address, int base)
\begin{DoxyCompactList}\small\item\em Find a device with matching type A\+ND address. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a65c79b7eefba041cfa0ab177cec12de1}{set\+\_\+active\+\_\+device}} (int8\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Set the Active disk or device pointers Since we can be called multiple times per single G\+P\+IB state we do not display state changes here. Other code displays the active state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_ad11d05d894014dcaa4afb8df15e5065c}{S\+S80\+\_\+\+Set\+\_\+\+Defaults}} (int8\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Set Default Values for a new S\+S80 Device IF defaults have been defined Most values in the C\+O\+N\+T\+R\+O\+L\+ER and U\+N\+IT are defaults that should not need to be specified Note all of the values are zeroed on allocation including strings. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a592c0e156b35c874e7107db920ca455c}{free\+\_\+device}} (int8\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Free a Device structure for a disk or printer. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a3558d65506a66b177ad42b64e4a557b3}{alloc\+\_\+device}} (int type)
\begin{DoxyCompactList}\small\item\em Allocate a Device structure for a disk or printer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a756aa4b7d6e1757b9465729dffe7ed7f}{init\+\_\+\+Devices}} ()
\begin{DoxyCompactList}\small\item\em Init Config Parser Stack Called only durring power up so we do not have to free memory. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{drives_8c_a21b219166399e8a1195b92d6a9872bbe}{push\+\_\+state}} (int state)
\begin{DoxyCompactList}\small\item\em Push Parser State. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{drives_8c_a45b0cf880b953984f9351f5d2bd9c77d}{pop\+\_\+state}} ()
\begin{DoxyCompactList}\small\item\em Pop Parser State. \end{DoxyCompactList}\item 
\mbox{\hyperlink{hardware_2user__config_8h_af6a258d8f3ee5206d682d799316314b1}{bool}} \mbox{\hyperlink{drives_8c_a8b0e509b202f29cc333b28da6105f6c1}{assign\+\_\+value}} (char $\ast$str, uint32\+\_\+t minval, uint32\+\_\+t maxval, uint32\+\_\+t $\ast$val)
\begin{DoxyCompactList}\small\item\em assigned a value \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_af14d66761d39f4a2d5f7c3ac59439034}{set\+\_\+\+Config\+\_\+\+Defaults}} ()
\begin{DoxyCompactList}\small\item\em Set Defaults for any missing disk or printer devices These are only used if the Config file omits them or is empty. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a590c450d2152e0312492bd4fc2514943}{hpdir\+\_\+set\+\_\+device}} (int8\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Set Device parameters from hpdir information. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a46eecffe5ed3e8be16302da6a4dfd291}{hpdir\+\_\+set\+\_\+parameters}} (int8\+\_\+t index, char $\ast$model)
\begin{DoxyCompactList}\small\item\em Lookup model in and set drive parameters if found. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a5a003a7f569e9977ede275f4ca540932}{verify\+\_\+device}} (int8\+\_\+t index)
\begin{DoxyCompactList}\small\item\em Verify a device and delete it is there are any errors. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a0a91dfbebaba00cb10d2028e82bcaf2f}{verify\+\_\+devices}} ()
\begin{DoxyCompactList}\small\item\em Post process and Verify all devices. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_ade13ccf70ad5e99d4c3f6e06e8c4796b}{format\+\_\+drives}} ()
\begin{DoxyCompactList}\small\item\em Format devices that have no image file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_af3d71ffd0be15f40e2e18bda09e3d9a7}{drives\+\_\+help}} (int8\+\_\+t full)
\begin{DoxyCompactList}\small\item\em Help Menu for drives and configuration help See\+: int drives\+\_\+tests(char $\ast$str) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a8245bd082db52ff1a79cf0265a49a55e}{mount\+\_\+usage}} ()
\item 
int \mbox{\hyperlink{drives_8c_ae5b11c9707bd09f96c4b034f559f9f75}{drives\+\_\+tests}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em G\+P\+IB user tests User invoked G\+P\+IB functions and tasks. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_aa3767c1f97b5434dd07bd1e9cf09ad53}{index\+\_\+address}} (int8\+\_\+t address)
\begin{DoxyCompactList}\small\item\em return index matching address \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_ac2597ef72ba03446dee0b35a0ab9457f}{test\+\_\+address}} (int8\+\_\+t address)
\begin{DoxyCompactList}\small\item\em test if address is in use \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a3e14f8f570a4fe7507f11cb925652a10}{index\+\_\+ppr}} (int8\+\_\+t ppr)
\begin{DoxyCompactList}\small\item\em return index matching ppr \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a3b18f41b7f72f3e6aa8eea393b5ac434}{test\+\_\+ppr}} (int8\+\_\+t ppr)
\begin{DoxyCompactList}\small\item\em test if P\+PR is in use \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_adfd86f4f3dda894733f00eaed872ca0a}{umount}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em umount disks -\/ testing \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{drives_8c_a46d891d66bc49da71fc596204326a942}{mount}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em mount disks -\/ testing \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drives_8c_a86ecd1f1425e7da9aff557b72305b494}{display\+\_\+mount}} (int8\+\_\+t index)
\item 
void \mbox{\hyperlink{drives_8c_ae2a947c89cc492d11faa2536e33abe79}{display\+\_\+mounts}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structhpdir__t}{hpdir\+\_\+t}} \mbox{\hyperlink{drives_8c_a6edb848661be578eca78845085870674}{hpdir}}
\begin{DoxyCompactList}\small\item\em hpdir.\+ini file processing \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{drives_8c_a4c18df3efdb3fcd126c2df631f2f2515}{stack\+\_\+ind}} = 0
\item 
static int \mbox{\hyperlink{drives_8c_a7396cc31899052a2a171fbfe3f32b2d9}{stack\+\_\+p}} \mbox{[}\mbox{\hyperlink{drives_8c_af24298a5ce56647751e432673282c6e2}{M\+A\+X\+\_\+\+S\+T\+A\+CK}}\mbox{]}
\item 
\mbox{\hyperlink{structDeviceType}{Device\+Type}} \mbox{\hyperlink{drives_8c_acfedc9290d5356e240da3373bb0ebdbd}{Devices}} \mbox{[}\mbox{\hyperlink{drives_8h_a4e132cfaa78353e3af1474a86b2dd535}{M\+A\+X\+\_\+\+D\+E\+V\+I\+C\+ES}}\mbox{]}
\item 
\mbox{\hyperlink{structPRINTERDeviceType}{P\+R\+I\+N\+T\+E\+R\+Device\+Type}} $\ast$ \mbox{\hyperlink{drives_8c_abe5ffe9f7c96ad748b695ed5b45d6e52}{P\+R\+I\+N\+T\+E\+Rp}} = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}
\begin{DoxyCompactList}\small\item\em Active Printer Device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structSS80DiskType}{S\+S80\+Disk\+Type}} $\ast$ \mbox{\hyperlink{drives_8c_ae2b90e5f9a8ae9e5df3fdee98a215939}{S\+S80p}} = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}
\begin{DoxyCompactList}\small\item\em Active S\+S80 Device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structSS80StateType}{S\+S80\+State\+Type}} $\ast$ \mbox{\hyperlink{drives_8c_a26e0264b8581231a3a90fbb418f5812a}{S\+S80s}} = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}
\item 
\mbox{\hyperlink{structtoken__t}{token\+\_\+t}} \mbox{\hyperlink{drives_8c_ac9135fa6b27171be1683c98c1b624c8a}{tokens}} \mbox{[}$\,$\mbox{]}
\item 
int \mbox{\hyperlink{drives_8c_a9921ae02cadccc99dd6c3a9b68be050a}{lines}} = 0
\begin{DoxyCompactList}\small\item\em Config file line number. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
drive definitions for H\+P85 disk emulator project for A\+VR. 

\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file. 
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyParagraph}{Copyright \copyright{} 2014-\/2020 Mike Gore, All rights reserved. G\+PL}

\end{DoxyParagraph}
\begin{DoxySeeAlso}{See also}
\href{http://github.com/magore/hp85disk}{\texttt{ http\+://github.\+com/magore/hp85disk}} 

\href{http://github.com/magore/hp85disk/COPYRIGHT.md}{\texttt{ http\+://github.\+com/magore/hp85disk/\+C\+O\+P\+Y\+R\+I\+G\+H\+T.\+md}} for Copyright details 
\end{DoxySeeAlso}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{drives_8c_af24298a5ce56647751e432673282c6e2}\label{drives_8c_af24298a5ce56647751e432673282c6e2}} 
\index{drives.c@{drives.c}!MAX\_STACK@{MAX\_STACK}}
\index{MAX\_STACK@{MAX\_STACK}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{MAX\_STACK}{MAX\_STACK}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+S\+T\+A\+CK~5}



Config Parser Stack. 



Definition at line 28 of file drives.\+c.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{drives_8c_a3558d65506a66b177ad42b64e4a557b3}\label{drives_8c_a3558d65506a66b177ad42b64e4a557b3}} 
\index{drives.c@{drives.c}!alloc\_device@{alloc\_device}}
\index{alloc\_device@{alloc\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{alloc\_device()}{alloc\_device()}}
{\footnotesize\ttfamily int8\+\_\+t alloc\+\_\+device (\begin{DoxyParamCaption}\item[{int}]{type }\end{DoxyParamCaption})}



Allocate a Device structure for a disk or printer. 


\begin{DoxyParams}{Parameters}
{\em type} & disk type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Devices\mbox{[}\mbox{]} index on sucess or -\/1 
\end{DoxyReturn}


Definition at line 1269 of file drives.\+c.



Referenced by mount(), and Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a8b0e509b202f29cc333b28da6105f6c1}\label{drives_8c_a8b0e509b202f29cc333b28da6105f6c1}} 
\index{drives.c@{drives.c}!assign\_value@{assign\_value}}
\index{assign\_value@{assign\_value}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{assign\_value()}{assign\_value()}}
{\footnotesize\ttfamily \mbox{\hyperlink{hardware_2user__config_8h_af6a258d8f3ee5206d682d799316314b1}{bool}} assign\+\_\+value (\begin{DoxyParamCaption}\item[{char $\ast$}]{str,  }\item[{uint32\+\_\+t}]{minval,  }\item[{uint32\+\_\+t}]{maxval,  }\item[{uint32\+\_\+t $\ast$}]{val }\end{DoxyParamCaption})}



assigned a value 

===============================================
\begin{DoxyItemize}
\item Used only for debugging 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em str} & string to examine \\
\hline
\mbox{\texttt{ in}}  & {\em minval} & minimum value \\
\hline
\mbox{\texttt{ in}}  & {\em maxval} & maximum value \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$val} & value to set\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 is matched and value in range, 0 not matched or out of range 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 1380 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_ac1a2445dba59c3eb47276b37107c6f64}\label{drives_8c_ac1a2445dba59c3eb47276b37107c6f64}} 
\index{drives.c@{drives.c}!base\_to\_str@{base\_to\_str}}
\index{base\_to\_str@{base\_to\_str}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{base\_to\_str()}{base\_to\_str()}}
{\footnotesize\ttfamily char$\ast$ base\+\_\+to\+\_\+str (\begin{DoxyParamCaption}\item[{int}]{base }\end{DoxyParamCaption})}



Convert base address into a string identifier. 


\begin{DoxyParams}{Parameters}
{\em base} & B\+A\+S\+E\+\_\+\+M\+AL, B\+A\+S\+E\+\_\+\+M\+TA or B\+A\+S\+E\+\_\+\+M\+SA only \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string \char`\"{}\+M\+L\+A\char`\"{}, \char`\"{}\+M\+T\+A\char`\"{}, \char`\"{}\+M\+S\+A\char`\"{} or error string 
\end{DoxyReturn}


Definition at line 1038 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a16cebc504495fa2ce1533329d89ec900}\label{drives_8c_a16cebc504495fa2ce1533329d89ec900}} 
\index{drives.c@{drives.c}!count\_drive\_types@{count\_drive\_types}}
\index{count\_drive\_types@{count\_drive\_types}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{count\_drive\_types()}{count\_drive\_types()}}
{\footnotesize\ttfamily int8\+\_\+t count\+\_\+drive\+\_\+types (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{type }\end{DoxyParamCaption})}



Count number of devices of a sertain type. 


\begin{DoxyParams}{Parameters}
{\em type} & disk type like S\+S80\+\_\+\+T\+Y\+PE \\
\hline
\end{DoxyParams}


Definition at line 1005 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a31147d548df5d8a7674b0a50f35accac}\label{drives_8c_a31147d548df5d8a7674b0a50f35accac}} 
\index{drives.c@{drives.c}!display\_Addresses@{display\_Addresses}}
\index{display\_Addresses@{display\_Addresses}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{display\_Addresses()}{display\_Addresses()}}
{\footnotesize\ttfamily void display\+\_\+\+Addresses (\begin{DoxyParamCaption}\item[{int}]{verbose }\end{DoxyParamCaption})}



Display Configuration device address saummary. 

=============================================== \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 778 of file drives.\+c.



Referenced by drives\+\_\+tests(), and main().

\mbox{\Hypertarget{drives_8c_a226919985bc5fcb9a6fc250d94e5a393}\label{drives_8c_a226919985bc5fcb9a6fc250d94e5a393}} 
\index{drives.c@{drives.c}!display\_Config@{display\_Config}}
\index{display\_Config@{display\_Config}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{display\_Config()}{display\_Config()}}
{\footnotesize\ttfamily void display\+\_\+\+Config (\begin{DoxyParamCaption}\item[{int}]{verbose }\end{DoxyParamCaption})}



Display current Configuration File values. 

=============================================== \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
Active Printer Device

Active S\+S80 Device

Definition at line 849 of file drives.\+c.



Referenced by drives\+\_\+tests().

\mbox{\Hypertarget{drives_8c_a86ecd1f1425e7da9aff557b72305b494}\label{drives_8c_a86ecd1f1425e7da9aff557b72305b494}} 
\index{drives.c@{drives.c}!display\_mount@{display\_mount}}
\index{display\_mount@{display\_mount}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{display\_mount()}{display\_mount()}}
{\footnotesize\ttfamily void display\+\_\+mount (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}

Active Printer Device

Active S\+S80 Device

Definition at line 2064 of file drives.\+c.



Referenced by display\+\_\+mounts(), and verify\+\_\+device().

\mbox{\Hypertarget{drives_8c_ae2a947c89cc492d11faa2536e33abe79}\label{drives_8c_ae2a947c89cc492d11faa2536e33abe79}} 
\index{drives.c@{drives.c}!display\_mounts@{display\_mounts}}
\index{display\_mounts@{display\_mounts}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{display\_mounts()}{display\_mounts()}}
{\footnotesize\ttfamily void display\+\_\+mounts (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 2102 of file drives.\+c.



Referenced by mount().

\mbox{\Hypertarget{drives_8c_af3d71ffd0be15f40e2e18bda09e3d9a7}\label{drives_8c_af3d71ffd0be15f40e2e18bda09e3d9a7}} 
\index{drives.c@{drives.c}!drives\_help@{drives\_help}}
\index{drives\_help@{drives\_help}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{drives\_help()}{drives\_help()}}
{\footnotesize\ttfamily void drives\+\_\+help (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{full }\end{DoxyParamCaption})}



Help Menu for drives and configuration help See\+: int drives\+\_\+tests(char $\ast$str) 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1760 of file drives.\+c.



Referenced by drives\+\_\+tests(), help(), and mount\+\_\+usage().

\mbox{\Hypertarget{drives_8c_ae5b11c9707bd09f96c4b034f559f9f75}\label{drives_8c_ae5b11c9707bd09f96c4b034f559f9f75}} 
\index{drives.c@{drives.c}!drives\_tests@{drives\_tests}}
\index{drives\_tests@{drives\_tests}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{drives\_tests()}{drives\_tests()}}
{\footnotesize\ttfamily int drives\+\_\+tests (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



G\+P\+IB user tests User invoked G\+P\+IB functions and tasks. 

\begin{DoxyReturn}{Returns}
1 matched token, 0 if not 
\end{DoxyReturn}


Definition at line 1798 of file drives.\+c.



Referenced by user\+\_\+task().

\mbox{\Hypertarget{drives_8c_ac29ead2d44b6f45ac521ec75ed3c0849}\label{drives_8c_ac29ead2d44b6f45ac521ec75ed3c0849}} 
\index{drives.c@{drives.c}!find\_device@{find\_device}}
\index{find\_device@{find\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{find\_device()}{find\_device()}}
{\footnotesize\ttfamily int8\+\_\+t find\+\_\+device (\begin{DoxyParamCaption}\item[{int}]{type,  }\item[{int}]{address,  }\item[{int}]{base }\end{DoxyParamCaption})}



Find a device with matching type A\+ND address. 


\begin{DoxyParams}{Parameters}
{\em type} & disk type \\
\hline
{\em address} & G\+P\+IB device address 0 based \\
\hline
{\em base} & B\+A\+S\+E\+\_\+\+M\+LA,B\+A\+S\+E\+\_\+\+M\+TA or B\+A\+S\+E\+\_\+\+M\+SA address range \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index of Devices\mbox{[}\mbox{]} or -\/1 if not found 
\end{DoxyReturn}

\begin{DoxyCodeInclude}{0}

\end{DoxyCodeInclude}


Make sure address is in expected range

convert to device address

search for device address

Definition at line 1063 of file drives.\+c.



Referenced by listen\+\_\+cleanup(), P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+L\+A(), P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+S\+A(), P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+T\+A(), S\+S80\+\_\+is\+\_\+\+M\+L\+A(), S\+S80\+\_\+is\+\_\+\+M\+S\+A(), and S\+S80\+\_\+is\+\_\+\+M\+T\+A().

\mbox{\Hypertarget{drives_8c_ae91f9eb2b227952368b870d702ed5655}\label{drives_8c_ae91f9eb2b227952368b870d702ed5655}} 
\index{drives.c@{drives.c}!find\_free@{find\_free}}
\index{find\_free@{find\_free}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{find\_free()}{find\_free()}}
{\footnotesize\ttfamily int8\+\_\+t find\+\_\+free (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Find first free Devices\mbox{[}\mbox{]} slot. 

\begin{DoxyReturn}{Returns}
Devices\mbox{[}\mbox{]} index of free slot or -\/1 
\end{DoxyReturn}


Definition at line 1052 of file drives.\+c.



Referenced by alloc\+\_\+device(), and set\+\_\+\+Config\+\_\+\+Defaults().

\mbox{\Hypertarget{drives_8c_a9a42c5f4d02b83c4a7cee53139b3c70d}\label{drives_8c_a9a42c5f4d02b83c4a7cee53139b3c70d}} 
\index{drives.c@{drives.c}!find\_type@{find\_type}}
\index{find\_type@{find\_type}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{find\_type()}{find\_type()}}
{\footnotesize\ttfamily int8\+\_\+t find\+\_\+type (\begin{DoxyParamCaption}\item[{int}]{type }\end{DoxyParamCaption})}



Seach Devices\mbox{[}\mbox{]} for A\+NY definitions of a disk type. 


\begin{DoxyParams}{Parameters}
{\em type} & disk type like S\+S80\+\_\+\+T\+Y\+PE \\
\hline
\end{DoxyParams}


Definition at line 991 of file drives.\+c.



Referenced by find\+\_\+free(), set\+\_\+\+Config\+\_\+\+Defaults(), and S\+S80\+\_\+\+Set\+\_\+\+Defaults().

\mbox{\Hypertarget{drives_8c_ade13ccf70ad5e99d4c3f6e06e8c4796b}\label{drives_8c_ade13ccf70ad5e99d4c3f6e06e8c4796b}} 
\index{drives.c@{drives.c}!format\_drives@{format\_drives}}
\index{format\_drives@{format\_drives}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{format\_drives()}{format\_drives()}}
{\footnotesize\ttfamily void format\+\_\+drives (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Format devices that have no image file. 

=============================================== \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
Active S\+S80 Device

Definition at line 1669 of file drives.\+c.



Referenced by main().

\mbox{\Hypertarget{drives_8c_a592c0e156b35c874e7107db920ca455c}\label{drives_8c_a592c0e156b35c874e7107db920ca455c}} 
\index{drives.c@{drives.c}!free\_device@{free\_device}}
\index{free\_device@{free\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{free\_device()}{free\_device()}}
{\footnotesize\ttfamily void free\+\_\+device (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}



Free a Device structure for a disk or printer. 


\begin{DoxyParams}{Parameters}
{\em type} & disk index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1220 of file drives.\+c.



Referenced by umount(), and verify\+\_\+device().

\mbox{\Hypertarget{drives_8c_a590c450d2152e0312492bd4fc2514943}\label{drives_8c_a590c450d2152e0312492bd4fc2514943}} 
\index{drives.c@{drives.c}!hpdir\_set\_device@{hpdir\_set\_device}}
\index{hpdir\_set\_device@{hpdir\_set\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{hpdir\_set\_device()}{hpdir\_set\_device()}}
{\footnotesize\ttfamily int8\+\_\+t hpdir\+\_\+set\+\_\+device (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}



Set Device parameters from hpdir information. 

=============================================== 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em index} & device index\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 success, 0 on error 
\end{DoxyReturn}


Definition at line 1495 of file drives.\+c.



Referenced by hpdir\+\_\+set\+\_\+parameters().

\mbox{\Hypertarget{drives_8c_a46eecffe5ed3e8be16302da6a4dfd291}\label{drives_8c_a46eecffe5ed3e8be16302da6a4dfd291}} 
\index{drives.c@{drives.c}!hpdir\_set\_parameters@{hpdir\_set\_parameters}}
\index{hpdir\_set\_parameters@{hpdir\_set\_parameters}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{hpdir\_set\_parameters()}{hpdir\_set\_parameters()}}
{\footnotesize\ttfamily int8\+\_\+t hpdir\+\_\+set\+\_\+parameters (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index,  }\item[{char $\ast$}]{model }\end{DoxyParamCaption})}



Lookup model in and set drive parameters if found. 

=============================================== 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em index} & Devices index \\
\hline
\mbox{\texttt{ in}}  & {\em model} & model string\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 or failure 
\end{DoxyReturn}


Definition at line 1541 of file drives.\+c.



Referenced by mount(), and Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_aa3767c1f97b5434dd07bd1e9cf09ad53}\label{drives_8c_aa3767c1f97b5434dd07bd1e9cf09ad53}} 
\index{drives.c@{drives.c}!index\_address@{index\_address}}
\index{index\_address@{index\_address}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{index\_address()}{index\_address()}}
{\footnotesize\ttfamily int8\+\_\+t index\+\_\+address (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{address }\end{DoxyParamCaption})}



return index matching address 

\begin{DoxyReturn}{Returns}
index or -\/1 if not found 
\end{DoxyReturn}


Definition at line 1862 of file drives.\+c.



Referenced by test\+\_\+address(), and umount().

\mbox{\Hypertarget{drives_8c_a3e14f8f570a4fe7507f11cb925652a10}\label{drives_8c_a3e14f8f570a4fe7507f11cb925652a10}} 
\index{drives.c@{drives.c}!index\_ppr@{index\_ppr}}
\index{index\_ppr@{index\_ppr}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{index\_ppr()}{index\_ppr()}}
{\footnotesize\ttfamily int8\+\_\+t index\+\_\+ppr (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{ppr }\end{DoxyParamCaption})}



return index matching ppr 

\begin{DoxyReturn}{Returns}
index or -\/1 if not found 
\end{DoxyReturn}


Definition at line 1892 of file drives.\+c.



Referenced by test\+\_\+ppr().

\mbox{\Hypertarget{drives_8c_a756aa4b7d6e1757b9465729dffe7ed7f}\label{drives_8c_a756aa4b7d6e1757b9465729dffe7ed7f}} 
\index{drives.c@{drives.c}!init\_Devices@{init\_Devices}}
\index{init\_Devices@{init\_Devices}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{init\_Devices()}{init\_Devices()}}
{\footnotesize\ttfamily void init\+\_\+\+Devices (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Init Config Parser Stack Called only durring power up so we do not have to free memory. 



Definition at line 1325 of file drives.\+c.



Referenced by Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a46d891d66bc49da71fc596204326a942}\label{drives_8c_a46d891d66bc49da71fc596204326a942}} 
\index{drives.c@{drives.c}!mount@{mount}}
\index{mount@{mount}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{mount()}{mount()}}
{\footnotesize\ttfamily int8\+\_\+t mount (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



mount disks -\/ testing 

=============================================== \begin{DoxyReturn}{Returns}
Devices\mbox{[}\mbox{]} index on success, -\/1 on error 
\end{DoxyReturn}
Active Printer Device

Active S\+S80 Device

Definition at line 1948 of file drives.\+c.



Referenced by drives\+\_\+tests().

\mbox{\Hypertarget{drives_8c_a8245bd082db52ff1a79cf0265a49a55e}\label{drives_8c_a8245bd082db52ff1a79cf0265a49a55e}} 
\index{drives.c@{drives.c}!mount\_usage@{mount\_usage}}
\index{mount\_usage@{mount\_usage}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{mount\_usage()}{mount\_usage()}}
{\footnotesize\ttfamily void mount\+\_\+usage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 1789 of file drives.\+c.



Referenced by mount().

\mbox{\Hypertarget{drives_8c_a45b0cf880b953984f9351f5d2bd9c77d}\label{drives_8c_a45b0cf880b953984f9351f5d2bd9c77d}} 
\index{drives.c@{drives.c}!pop\_state@{pop\_state}}
\index{pop\_state@{pop\_state}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{pop\_state()}{pop\_state()}}
{\footnotesize\ttfamily int pop\+\_\+state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Pop Parser State. 

=============================================== \begin{DoxyReturn}{Returns}
state 
\end{DoxyReturn}


Definition at line 1358 of file drives.\+c.



Referenced by Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a3da86aaab90b0d4bb14f79e296a155bb}\label{drives_8c_a3da86aaab90b0d4bb14f79e296a155bb}} 
\index{drives.c@{drives.c}!print\_str\_P@{print\_str\_P}}
\index{print\_str\_P@{print\_str\_P}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{print\_str\_P()}{print\_str\_P()}}
{\footnotesize\ttfamily void print\+\_\+str\+\_\+P (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{mathio_8h_a9306b0c3083933632aca02ebb1fe14d5}{\+\_\+\+\_\+memx}} const char $\ast$}]{str,  }\item[{char $\ast$}]{arg }\end{DoxyParamCaption})}



Display Configuration File string. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em $\ast$str} & title \\
\hline
{\em $\ast$arg} & string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 241 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a5a42638642898b6c3433591e1ae5e8c3}\label{drives_8c_a5a42638642898b6c3433591e1ae5e8c3}} 
\index{drives.c@{drives.c}!print\_tok@{print\_tok}}
\index{print\_tok@{print\_tok}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{print\_tok()}{print\_tok()}}
{\footnotesize\ttfamily void print\+\_\+tok (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{tok,  }\item[{uint8\+\_\+t}]{spaces }\end{DoxyParamCaption})}



Display Configuration File variable. 

=============================================== \hypertarget{drives_8h_autotoc_md170}{}\doxysubsection{@brief Display Configuration File variable}\label{drives_8h_autotoc_md170}

\begin{DoxyParams}{Parameters}
{\em str} & title \\
\hline
{\em spaces} & indent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 321 of file drives.\+c.



Referenced by display\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a0420433bf4bbb957a00a4aa83bdcf02a}\label{drives_8c_a0420433bf4bbb957a00a4aa83bdcf02a}} 
\index{drives.c@{drives.c}!print\_tok\_str@{print\_tok\_str}}
\index{print\_tok\_str@{print\_tok\_str}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{print\_tok\_str()}{print\_tok\_str()}}
{\footnotesize\ttfamily void print\+\_\+tok\+\_\+str (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{tok,  }\item[{uint8\+\_\+t}]{spaces,  }\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



Display Configuration File variable. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em tok} & token \\
\hline
{\em spaces} & indent \\
\hline
{\em str} & string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 305 of file drives.\+c.



Referenced by display\+\_\+\+Addresses(), and display\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a939e51554e79e0a0871299a063b04cd0}\label{drives_8c_a939e51554e79e0a0871299a063b04cd0}} 
\index{drives.c@{drives.c}!print\_tok\_val@{print\_tok\_val}}
\index{print\_tok\_val@{print\_tok\_val}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{print\_tok\_val()}{print\_tok\_val()}}
{\footnotesize\ttfamily void print\+\_\+tok\+\_\+val (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{tok,  }\item[{uint8\+\_\+t}]{spaces,  }\item[{uint32\+\_\+t}]{val }\end{DoxyParamCaption})}



Display Configuration File variable. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em tok} & token \\
\hline
{\em spaces} & indent \\
\hline
{\em val} & variable value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 290 of file drives.\+c.



Referenced by display\+\_\+\+Addresses(), and display\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_ab0cc4deddae206c7762399a8d54856e1}\label{drives_8c_ab0cc4deddae206c7762399a8d54856e1}} 
\index{drives.c@{drives.c}!print\_var\_P@{print\_var\_P}}
\index{print\_var\_P@{print\_var\_P}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{print\_var\_P()}{print\_var\_P()}}
{\footnotesize\ttfamily void print\+\_\+var\+\_\+P (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{mathio_8h_a9306b0c3083933632aca02ebb1fe14d5}{\+\_\+\+\_\+memx}} const char $\ast$}]{str,  }\item[{uint32\+\_\+t}]{val }\end{DoxyParamCaption})}



Display Configuration File variable. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em str} & title \\
\hline
{\em val} & variable value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 224 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a21b219166399e8a1195b92d6a9872bbe}\label{drives_8c_a21b219166399e8a1195b92d6a9872bbe}} 
\index{drives.c@{drives.c}!push\_state@{push\_state}}
\index{push\_state@{push\_state}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{push\_state()}{push\_state()}}
{\footnotesize\ttfamily int push\+\_\+state (\begin{DoxyParamCaption}\item[{int}]{state }\end{DoxyParamCaption})}



Push Parser State. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em state} & parser state \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
state 
\end{DoxyReturn}


Definition at line 1345 of file drives.\+c.



Referenced by Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_ab0ea5b4d5a144a8ab1c1d2c9b08aa21f}\label{drives_8c_ab0ea5b4d5a144a8ab1c1d2c9b08aa21f}} 
\index{drives.c@{drives.c}!Read\_Config@{Read\_Config}}
\index{Read\_Config@{Read\_Config}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{Read\_Config()}{Read\_Config()}}
{\footnotesize\ttfamily int Read\+\_\+\+Config (\begin{DoxyParamCaption}\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Read and parse a config file using P\+O\+S\+IX functions Set all drive parameters and debuglevel. 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em name} & config file name to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of parse errors 
\end{DoxyReturn}
Printer Device

S\+S80 Device

Definition at line 336 of file drives.\+c.



Referenced by gpib\+\_\+file\+\_\+init().

\mbox{\Hypertarget{drives_8c_a65c79b7eefba041cfa0ab177cec12de1}\label{drives_8c_a65c79b7eefba041cfa0ab177cec12de1}} 
\index{drives.c@{drives.c}!set\_active\_device@{set\_active\_device}}
\index{set\_active\_device@{set\_active\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{set\_active\_device()}{set\_active\_device()}}
{\footnotesize\ttfamily int8\+\_\+t set\+\_\+active\+\_\+device (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}



Set the Active disk or device pointers Since we can be called multiple times per single G\+P\+IB state we do not display state changes here. Other code displays the active state. 


\begin{DoxyParams}{Parameters}
{\em index} & Devices\mbox{[}\mbox{]} index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success or 0 on fail 
\end{DoxyReturn}
We also check for -\/1 So the result of \mbox{\hyperlink{drives_8c_ac29ead2d44b6f45ac521ec75ed3c0849}{find\+\_\+device()}} can be used without additional tests

Definition at line 1093 of file drives.\+c.



Referenced by P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+L\+A(), P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+S\+A(), P\+R\+I\+N\+T\+E\+R\+\_\+is\+\_\+\+M\+T\+A(), S\+S80\+\_\+init(), S\+S80\+\_\+is\+\_\+\+M\+L\+A(), S\+S80\+\_\+is\+\_\+\+M\+S\+A(), and S\+S80\+\_\+is\+\_\+\+M\+T\+A().

\mbox{\Hypertarget{drives_8c_af14d66761d39f4a2d5f7c3ac59439034}\label{drives_8c_af14d66761d39f4a2d5f7c3ac59439034}} 
\index{drives.c@{drives.c}!set\_Config\_Defaults@{set\_Config\_Defaults}}
\index{set\_Config\_Defaults@{set\_Config\_Defaults}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{set\_Config\_Defaults()}{set\_Config\_Defaults()}}
{\footnotesize\ttfamily void set\+\_\+\+Config\+\_\+\+Defaults (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set Defaults for any missing disk or printer devices These are only used if the Config file omits them or is empty. 

=============================================== \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1427 of file drives.\+c.



Referenced by gpib\+\_\+file\+\_\+init(), and Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_ad11d05d894014dcaa4afb8df15e5065c}\label{drives_8c_ad11d05d894014dcaa4afb8df15e5065c}} 
\index{drives.c@{drives.c}!SS80\_Set\_Defaults@{SS80\_Set\_Defaults}}
\index{SS80\_Set\_Defaults@{SS80\_Set\_Defaults}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{SS80\_Set\_Defaults()}{SS80\_Set\_Defaults()}}
{\footnotesize\ttfamily void S\+S80\+\_\+\+Set\+\_\+\+Defaults (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}



Set Default Values for a new S\+S80 Device IF defaults have been defined Most values in the C\+O\+N\+T\+R\+O\+L\+ER and U\+N\+IT are defaults that should not need to be specified Note all of the values are zeroed on allocation including strings. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1177 of file drives.\+c.



Referenced by alloc\+\_\+device().

\mbox{\Hypertarget{drives_8c_ac2597ef72ba03446dee0b35a0ab9457f}\label{drives_8c_ac2597ef72ba03446dee0b35a0ab9457f}} 
\index{drives.c@{drives.c}!test\_address@{test\_address}}
\index{test\_address@{test\_address}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{test\_address()}{test\_address()}}
{\footnotesize\ttfamily int8\+\_\+t test\+\_\+address (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{address }\end{DoxyParamCaption})}



test if address is in use 

\begin{DoxyReturn}{Returns}
index 1 if found, 0 if not 
\end{DoxyReturn}


Definition at line 1875 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a3b18f41b7f72f3e6aa8eea393b5ac434}\label{drives_8c_a3b18f41b7f72f3e6aa8eea393b5ac434}} 
\index{drives.c@{drives.c}!test\_ppr@{test\_ppr}}
\index{test\_ppr@{test\_ppr}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{test\_ppr()}{test\_ppr()}}
{\footnotesize\ttfamily int8\+\_\+t test\+\_\+ppr (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{ppr }\end{DoxyParamCaption})}



test if P\+PR is in use 

\begin{DoxyReturn}{Returns}
index 1 if found, 0 if not 
\end{DoxyReturn}


Definition at line 1905 of file drives.\+c.

\mbox{\Hypertarget{drives_8c_a0e9716dd73ee22a2b9ea645df8fa10c8}\label{drives_8c_a0e9716dd73ee22a2b9ea645df8fa10c8}} 
\index{drives.c@{drives.c}!tok\_index@{tok\_index}}
\index{tok\_index@{tok\_index}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{tok\_index()}{tok\_index()}}
{\footnotesize\ttfamily int8\+\_\+t tok\+\_\+index (\begin{DoxyParamCaption}\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



return the tokens index of the matching string 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em str} & string tro match \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index 
\end{DoxyReturn}


Definition at line 256 of file drives.\+c.



Referenced by Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_a6494bcb31d494b6522598cbe1a293c9e}\label{drives_8c_a6494bcb31d494b6522598cbe1a293c9e}} 
\index{drives.c@{drives.c}!tok\_name@{tok\_name}}
\index{tok\_name@{tok\_name}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{tok\_name()}{tok\_name()}}
{\footnotesize\ttfamily char$\ast$ tok\+\_\+name (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{tok }\end{DoxyParamCaption})}



return string of matching token 

=============================================== 
\begin{DoxyParams}{Parameters}
{\em tok} & token \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char $\ast$ptr; 
\end{DoxyReturn}


Definition at line 272 of file drives.\+c.



Referenced by print\+\_\+tok(), print\+\_\+tok\+\_\+str(), and print\+\_\+tok\+\_\+val().

\mbox{\Hypertarget{drives_8c_aa43e282b0ff4a2e5b2ce59f0fce3fb68}\label{drives_8c_aa43e282b0ff4a2e5b2ce59f0fce3fb68}} 
\index{drives.c@{drives.c}!type\_to\_str@{type\_to\_str}}
\index{type\_to\_str@{type\_to\_str}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{type\_to\_str()}{type\_to\_str()}}
{\footnotesize\ttfamily char$\ast$ type\+\_\+to\+\_\+str (\begin{DoxyParamCaption}\item[{int}]{type }\end{DoxyParamCaption})}



Convert a disk type into a string. 


\begin{DoxyParams}{Parameters}
{\em type} & disk type like S\+S80\+\_\+\+T\+Y\+PE \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string pointer 
\end{DoxyReturn}


Definition at line 1021 of file drives.\+c.



Referenced by alloc\+\_\+device(), and set\+\_\+active\+\_\+device().

\mbox{\Hypertarget{drives_8c_adfd86f4f3dda894733f00eaed872ca0a}\label{drives_8c_adfd86f4f3dda894733f00eaed872ca0a}} 
\index{drives.c@{drives.c}!umount@{umount}}
\index{umount@{umount}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{umount()}{umount()}}
{\footnotesize\ttfamily int8\+\_\+t umount (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



umount disks -\/ testing 

=============================================== \begin{DoxyReturn}{Returns}
Devices\mbox{[}\mbox{]} index on success, -\/1 on error 
\end{DoxyReturn}


Definition at line 1922 of file drives.\+c.



Referenced by drives\+\_\+tests().

\mbox{\Hypertarget{drives_8c_a5a003a7f569e9977ede275f4ca540932}\label{drives_8c_a5a003a7f569e9977ede275f4ca540932}} 
\index{drives.c@{drives.c}!verify\_device@{verify\_device}}
\index{verify\_device@{verify\_device}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{verify\_device()}{verify\_device()}}
{\footnotesize\ttfamily int8\+\_\+t verify\+\_\+device (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{index }\end{DoxyParamCaption})}



Verify a device and delete it is there are any errors. 

=============================================== \begin{DoxyReturn}{Returns}
1 = OK 0 = E\+R\+R\+OR 
\end{DoxyReturn}
Active S\+S80 Device

Definition at line 1552 of file drives.\+c.



Referenced by mount(), and verify\+\_\+devices().

\mbox{\Hypertarget{drives_8c_a0a91dfbebaba00cb10d2028e82bcaf2f}\label{drives_8c_a0a91dfbebaba00cb10d2028e82bcaf2f}} 
\index{drives.c@{drives.c}!verify\_devices@{verify\_devices}}
\index{verify\_devices@{verify\_devices}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{verify\_devices()}{verify\_devices()}}
{\footnotesize\ttfamily void verify\+\_\+devices (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Post process and Verify all devices. 

=============================================== \begin{DoxyReturn}{Returns}
1 = OK 0 = E\+R\+R\+OR 
\end{DoxyReturn}


Definition at line 1655 of file drives.\+c.



Referenced by Read\+\_\+\+Config().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{drives_8c_acfedc9290d5356e240da3373bb0ebdbd}\label{drives_8c_acfedc9290d5356e240da3373bb0ebdbd}} 
\index{drives.c@{drives.c}!Devices@{Devices}}
\index{Devices@{Devices}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{Devices}{Devices}}
{\footnotesize\ttfamily \mbox{\hyperlink{structDeviceType}{Device\+Type}} Devices\mbox{[}\mbox{\hyperlink{drives_8h_a4e132cfaa78353e3af1474a86b2dd535}{M\+A\+X\+\_\+\+D\+E\+V\+I\+C\+ES}}\mbox{]}}



Definition at line 32 of file drives.\+c.



Referenced by alloc\+\_\+device(), count\+\_\+drive\+\_\+types(), display\+\_\+\+Addresses(), display\+\_\+\+Config(), display\+\_\+mount(), find\+\_\+device(), find\+\_\+type(), format\+\_\+drives(), free\+\_\+device(), hpdir\+\_\+set\+\_\+device(), index\+\_\+address(), index\+\_\+ppr(), init\+\_\+\+Devices(), mount(), Read\+\_\+\+Config(), set\+\_\+active\+\_\+device(), set\+\_\+\+Config\+\_\+\+Defaults(), S\+S80\+\_\+init(), S\+S80\+\_\+\+Set\+\_\+\+Defaults(), and verify\+\_\+device().

\mbox{\Hypertarget{drives_8c_a6edb848661be578eca78845085870674}\label{drives_8c_a6edb848661be578eca78845085870674}} 
\index{drives.c@{drives.c}!hpdir@{hpdir}}
\index{hpdir@{hpdir}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{hpdir}{hpdir}}
{\footnotesize\ttfamily \mbox{\hyperlink{structhpdir__t}{hpdir\+\_\+t}} hpdir}



hpdir.\+ini file processing 



Definition at line 48 of file drives.\+c.



Referenced by hpdir\+\_\+set\+\_\+device(), and mount().

\mbox{\Hypertarget{drives_8c_a9921ae02cadccc99dd6c3a9b68be050a}\label{drives_8c_a9921ae02cadccc99dd6c3a9b68be050a}} 
\index{drives.c@{drives.c}!lines@{lines}}
\index{lines@{lines}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{lines}{lines}}
{\footnotesize\ttfamily int lines = 0}



Config file line number. 



Definition at line 1368 of file drives.\+c.



Referenced by assign\+\_\+value(), Mat\+Read(), and Read\+\_\+\+Config().

\mbox{\Hypertarget{drives_8c_abe5ffe9f7c96ad748b695ed5b45d6e52}\label{drives_8c_abe5ffe9f7c96ad748b695ed5b45d6e52}} 
\index{drives.c@{drives.c}!PRINTERp@{PRINTERp}}
\index{PRINTERp@{PRINTERp}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{PRINTERp}{PRINTERp}}
{\footnotesize\ttfamily \mbox{\hyperlink{structPRINTERDeviceType}{P\+R\+I\+N\+T\+E\+R\+Device\+Type}}$\ast$ P\+R\+I\+N\+T\+E\+Rp = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}}



Active Printer Device. 



Definition at line 35 of file drives.\+c.



Referenced by display\+\_\+\+Config(), display\+\_\+mount(), mount(), Read\+\_\+\+Config(), and set\+\_\+active\+\_\+device().

\mbox{\Hypertarget{drives_8c_ae2b90e5f9a8ae9e5df3fdee98a215939}\label{drives_8c_ae2b90e5f9a8ae9e5df3fdee98a215939}} 
\index{drives.c@{drives.c}!SS80p@{SS80p}}
\index{SS80p@{SS80p}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{SS80p}{SS80p}}
{\footnotesize\ttfamily \mbox{\hyperlink{structSS80DiskType}{S\+S80\+Disk\+Type}}$\ast$ S\+S80p = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}}



Active S\+S80 Device. 



Definition at line 38 of file drives.\+c.



Referenced by display\+\_\+\+Addresses(), display\+\_\+\+Config(), display\+\_\+mount(), format\+\_\+drives(), free\+\_\+device(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), hpdir\+\_\+set\+\_\+device(), mount(), Read\+\_\+\+Config(), set\+\_\+active\+\_\+device(), S\+S80\+\_\+\+Amigo\+\_\+\+Clear(), S\+S80\+\_\+\+Blocks\+\_\+to\+\_\+\+Bytes(), S\+S80\+\_\+\+Bytes\+\_\+to\+\_\+\+Blocks(), S\+S80\+\_\+\+Cancel(), S\+S80\+\_\+\+Channel\+\_\+\+Independent\+\_\+\+Clear(), S\+S80\+\_\+cmd\+\_\+seek(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+\+C\+O\+M\+M\+A\+N\+D\+S(), S\+S80\+\_\+\+Execute\+\_\+\+State(), S\+S80\+\_\+init(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), S\+S80\+\_\+locate\+\_\+and\+\_\+write(), S\+S80\+\_\+\+Selected\+\_\+\+Device\+\_\+\+Clear(), S\+S80\+\_\+\+Set\+\_\+\+Defaults(), S\+S80\+\_\+\+Transparent\+\_\+\+State(), S\+S80\+\_\+\+Universal\+\_\+\+Device\+\_\+\+Clear(), S\+S80\+Controller\+Pack(), S\+S80\+Unit\+Pack(), S\+S80\+Volume\+Pack(), and verify\+\_\+device().

\mbox{\Hypertarget{drives_8c_a26e0264b8581231a3a90fbb418f5812a}\label{drives_8c_a26e0264b8581231a3a90fbb418f5812a}} 
\index{drives.c@{drives.c}!SS80s@{SS80s}}
\index{SS80s@{SS80s}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{SS80s}{SS80s}}
{\footnotesize\ttfamily \mbox{\hyperlink{structSS80StateType}{S\+S80\+State\+Type}}$\ast$ S\+S80s = \mbox{\hyperlink{hardware_2user__config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}}}



Definition at line 39 of file drives.\+c.



Referenced by Clear\+\_\+\+Common(), G\+P\+I\+B(), set\+\_\+active\+\_\+device(), S\+S80\+\_\+\+Cancel(), S\+S80\+\_\+\+Check\+\_\+\+Unit(), S\+S80\+\_\+\+Check\+\_\+\+Volume(), S\+S80\+\_\+cmd\+\_\+seek(), S\+S80\+\_\+\+Command\+\_\+\+State(), S\+S80\+\_\+error\+\_\+return(), S\+S80\+\_\+\+Execute\+\_\+\+State(), S\+S80\+\_\+increment(), S\+S80\+\_\+init(), S\+S80\+\_\+locate\+\_\+and\+\_\+read(), S\+S80\+\_\+locate\+\_\+and\+\_\+write(), S\+S80\+\_\+\+Report(), S\+S80\+\_\+send\+\_\+status(), and S\+S80\+\_\+\+Transparent\+\_\+\+State().

\mbox{\Hypertarget{drives_8c_a4c18df3efdb3fcd126c2df631f2f2515}\label{drives_8c_a4c18df3efdb3fcd126c2df631f2f2515}} 
\index{drives.c@{drives.c}!stack\_ind@{stack\_ind}}
\index{stack\_ind@{stack\_ind}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{stack\_ind}{stack\_ind}}
{\footnotesize\ttfamily int stack\+\_\+ind = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 29 of file drives.\+c.



Referenced by init\+\_\+\+Devices(), pop\+\_\+state(), and push\+\_\+state().

\mbox{\Hypertarget{drives_8c_a7396cc31899052a2a171fbfe3f32b2d9}\label{drives_8c_a7396cc31899052a2a171fbfe3f32b2d9}} 
\index{drives.c@{drives.c}!stack\_p@{stack\_p}}
\index{stack\_p@{stack\_p}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{stack\_p}{stack\_p}}
{\footnotesize\ttfamily int stack\+\_\+p\mbox{[}\mbox{\hyperlink{drives_8c_af24298a5ce56647751e432673282c6e2}{M\+A\+X\+\_\+\+S\+T\+A\+CK}}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 30 of file drives.\+c.



Referenced by pop\+\_\+state(), and push\+\_\+state().

\mbox{\Hypertarget{drives_8c_ac9135fa6b27171be1683c98c1b624c8a}\label{drives_8c_ac9135fa6b27171be1683c98c1b624c8a}} 
\index{drives.c@{drives.c}!tokens@{tokens}}
\index{tokens@{tokens}!drives.c@{drives.c}}
\doxysubsubsection{\texorpdfstring{tokens}{tokens}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtoken__t}{token\+\_\+t}} tokens\mbox{[}$\,$\mbox{]}}



Definition at line 169 of file drives.\+c.



Referenced by Read\+\_\+\+Config(), tok\+\_\+index(), and tok\+\_\+name().

