\hypertarget{td02lif_8h}{}\doxysection{lif/td02lif.h File Reference}
\label{td02lif_8h}\index{lif/td02lif.h@{lif/td02lif.h}}
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtd__header__t}{td\+\_\+header\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Tele\+Disk Image Header. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtd__comment__t}{td\+\_\+comment\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Comment header Only used when bit 7 of Track\+Density in Tele\+Disk Header is set. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtd__track__t}{td\+\_\+track\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Track Header Contains the Physical Sectors, Cylinder, Side number From the original physical disk used to make the Tele\+D\+Isk image. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtd__sector__t}{td\+\_\+sector\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Sector Header Contents of the Sector ID fields which preceeded the sector data From the original physical disk used to make the Tele\+D\+Isk image. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structsector__t}{sector\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Sector information and Sector \char`\"{}\+I\+D\char`\"{}. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structtrack__t}{track\+\_\+t}}
\item 
struct \mbox{\hyperlink{structdisk__t}{disk\+\_\+t}}
\item 
struct \mbox{\hyperlink{structliftel__t}{liftel\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Master Tele\+Disk Format Analisis structure We look for the specifications of L\+IF image stored inside the Tele\+Disk image We Examine the first 30 tracks (just some number less then 35) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{td02lif_8h_adb7e27e4930514f5d308e595ac82179f}{T\+D\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+S\+I\+ZE}}~12
\begin{DoxyCompactList}\small\item\em Size of Tele\+Disk image header. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_ab85959b32fe78bf7aa9d41f24b51affb}{T\+D\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+S\+I\+ZE}}~10
\begin{DoxyCompactList}\small\item\em Size of Tele\+Disk comment header. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_a073452932b78187f2195a7e780e39c77}{T\+D\+\_\+\+T\+R\+A\+C\+K\+\_\+\+S\+I\+ZE}}~4
\begin{DoxyCompactList}\small\item\em Size of Tele\+Disk track header size. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_aed98c638ebf178b27d95e0ab0287740e}{T\+D\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}}~6
\begin{DoxyCompactList}\small\item\em Size of Tele\+Disk sector header size. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_a39ad5a6dea9e9b9d5314d32f397fee7d}{M\+A\+X\+S\+E\+C\+T\+O\+RS}}~255
\begin{DoxyCompactList}\small\item\em Maximum number of sectors per track Used for sector data and sorting tables. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_a6d1c996bff41748d6840c43bd803c103}{M\+A\+X\+S\+I\+D\+ES}}~2
\begin{DoxyCompactList}\small\item\em Maximum number of sides per cyinder Tele\+Disk only trargetted floppies with 2 sides max! \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_aacffa7a6e218e2027e0702985d5177a7}{M\+A\+X\+C\+YL}}~255
\begin{DoxyCompactList}\small\item\em Maximum number of tracks per disk. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{td02lif_8h_ade239296a2facdacc8b64d0791e2d806}{M\+A\+X\+T\+R\+A\+C\+KS}}~(\mbox{\hyperlink{td02lif_8h_aacffa7a6e218e2027e0702985d5177a7}{M\+A\+X\+C\+YL}} $\ast$ \mbox{\hyperlink{td02lif_8h_a6d1c996bff41748d6840c43bd803c103}{M\+A\+X\+S\+I\+D\+ES}})
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structtm}{tm}} \mbox{\hyperlink{td02lif_8h_a2fea857c30e2c901566fcf45fac68ac5}{tm\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \{ \mbox{\hyperlink{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a8bc31c01d944463ce726f1e0be2dc208}{I\+B\+M\+F\+O\+R\+M\+A\+T\+\_\+\+SD}}, 
\mbox{\hyperlink{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a70cfb8452c9a7c273d2330b8196a4310}{I\+B\+M\+F\+O\+R\+M\+A\+T\+\_\+\+DD}}
 \}
\begin{DoxyCompactList}\small\item\em Encoding format td\+\_\+track.\+P\+Side \& 0x80 values. \end{DoxyCompactList}\item 
enum \{ \newline
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da58e36ef045836fef5beb7203038702db}{T\+D0\+\_\+\+I\+N\+IT}}, 
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dac8a30dec9ce7f9da528f90dc425240db}{T\+D0\+\_\+\+S\+T\+A\+RT}}, 
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da70580a7e132fd3209be3628279eacc1f}{T\+D0\+\_\+\+W\+A\+I\+T\+\_\+\+D\+I\+R\+E\+C\+T\+O\+RY}}, 
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dacc071de6c6236a108f0b962f95f92e55}{T\+D0\+\_\+\+D\+I\+R\+E\+C\+T\+O\+RY}}, 
\newline
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dad3f312d34f6480680c3501cb20ce2354}{T\+D0\+\_\+\+W\+A\+I\+T\+\_\+\+F\+I\+LE}}, 
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da8109d3f481c35118326c26b8d0dccc6b}{T\+D0\+\_\+\+F\+I\+LE}}, 
\mbox{\hyperlink{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da5427de3288f10eaba6969c8155cfd04a}{T\+D0\+\_\+\+D\+O\+NE}}
 \}
\begin{DoxyCompactList}\small\item\em T\+D0 to L\+IF state machine states. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{td02lif_8h_a369d6a9b15ee337cfb9e998b3e914f9c}{td0\+\_\+\+B2S}} (uint8\+\_\+t $\ast$B, int index, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Create a string from data that has no E\+OS but known size. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{td02lif_8h_a1e9e20346b224655b6586eb34efe1b5f}{td0\+\_\+crc16}} (uint8\+\_\+t $\ast$B, uint16\+\_\+t crc, uint16\+\_\+t poly, int size)
\begin{DoxyCompactList}\small\item\em Compute C\+R\+C16 of 8bit data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_a4d01fdafef7fb089054149fd0c04c75f}{td0\+\_\+hexdump}} (uint8\+\_\+t $\ast$data, int size)
\begin{DoxyCompactList}\small\item\em hex listing of data \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a038d4e9f86f76569a97e443e376a8e11}{td0\+\_\+unpack\+\_\+disk\+\_\+header}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structtd__header__t}{td\+\_\+header\+\_\+t}} $\ast$p)
\begin{DoxyCompactList}\small\item\em Extract Tele\+Disk image header data in architecture nutral way. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_aa2721b8d8bba4008a2b48d1b362b9850}{td0\+\_\+unpack\+\_\+comment\+\_\+header}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structtd__comment__t}{td\+\_\+comment\+\_\+t}} $\ast$p)
\begin{DoxyCompactList}\small\item\em Extract Tele\+Disk comment header data in architecture nutral way. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_ab9cc29346498d37ff85d3a3417d8fc11}{td0\+\_\+unpack\+\_\+track\+\_\+header}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structtd__track__t}{td\+\_\+track\+\_\+t}} $\ast$p)
\begin{DoxyCompactList}\small\item\em Extract Tele\+Disk track header data in architecture nutral way. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_ac393151af482d511b246de534da58e6f}{td0\+\_\+unpack\+\_\+sector\+\_\+header}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structtd__sector__t}{td\+\_\+sector\+\_\+t}} $\ast$p)
\begin{DoxyCompactList}\small\item\em Extract Tele\+Disk sector header data in architecture nutral way. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_a786b280e1ac85ba19bcb2f4ca0d21ee3}{td0\+\_\+compressed}} (int flag)
\begin{DoxyCompactList}\small\item\em Enable Tele\+Disk image compression mode. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a3f65dd34ac6cf2ee2ab6d5a913b0e457}{td0\+\_\+read}} (void $\ast$p, int osize, int size, \mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}} $\ast$fp)
\begin{DoxyCompactList}\small\item\em Read Tele\+Disk image data block Optionally decompress the data if decompression is enabled. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a7f9b8f09a74778aafcef0ccfcf7e73e6}{td0\+\_\+rle}} (uint8\+\_\+t $\ast$\mbox{\hyperlink{time_8c_a5a388b2bb2a2a9914c7d68ed3d09f7e9}{dst}}, uint8\+\_\+t $\ast$src, int max)
\begin{DoxyCompactList}\small\item\em Expand a Run Length encoded Tele\+Disk sector Notes\+: the source length is encoded in the source data Credits based on work (C) 2006-\/2014 Jean-\/\+François D\+EL N\+E\+RO Part of the Hx\+C\+Floppy\+Emulator library G\+NU G\+PL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_ab14f2a074ca85e1b32cc26f3369c574f}{td0\+\_\+trackinfo}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}}, int trackind, int index)
\begin{DoxyCompactList}\small\item\em Display Tele\+Disk track sector values. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_aff9adf4831cee8528e02b6456459435e}{td0\+\_\+sectorinfo}} (\mbox{\hyperlink{structtd__sector__t}{td\+\_\+sector\+\_\+t}} $\ast$P)
\begin{DoxyCompactList}\small\item\em Display Tele\+Disk sector data. \end{DoxyCompactList}\item 
long \mbox{\hyperlink{td02lif_8h_a48825de35a808127b9c304a764a48439}{td0\+\_\+density2bitrate}} (uint8\+\_\+t density)
\begin{DoxyCompactList}\small\item\em Convert Denisity to bitrate @\+We don\textquotesingle{}t care about the density except as a possible filter. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_ab49e4bf7cf89d5c6b90181a6bac46de6}{td0\+\_\+open}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}}, char $\ast$name)
\begin{DoxyCompactList}\small\item\em Opne Tele\+Disk image file process header and optional comment block. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a87120823fa3dd587214e6c70ebde151f}{td0\+\_\+read\+\_\+disk}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}})
\begin{DoxyCompactList}\small\item\em Read Tele\+Disk image file and save all sector data. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_ac777daf6e56deb920d24ac72f83f0624}{td0\+\_\+analize\+\_\+format}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}})
\begin{DoxyCompactList}\small\item\em Analize Tele\+Disk disk sector data Problem\+: We may have a disk that was reformatted multiple times Each format may have used differing sector sizes, number of tracks, sides For example\+: First format 80 track disk, two sided, and 9 512 byte sectors per track Second format 35 tracks, single sided, 16 sectors 256 bytes size per track Clearly we only want the 35 tracks on the first side. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a2b045f601a00f806f99e466e18109a08}{td0\+\_\+save\+\_\+lif}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}}, \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em save remaining sectors as L\+IF data \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a08cbf8c12076d3677df348da2dbf7ca2}{td0\+\_\+save\+\_\+lif\+\_\+sector}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}}, uint8\+\_\+t $\ast$data, int size, \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Process all sectors on a track from Tele\+Disk image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_a26d4f0afc5df75f388d93a9510ab39ee}{td0\+\_\+help}} (int full)
\item 
void \mbox{\hyperlink{td02lif_8h_a81ca655140437da58cb1d534792c8f83}{td0\+\_\+init\+\_\+liftel}} (void)
\begin{DoxyCompactList}\small\item\em Tele\+Disk image Analisis structure Find attributes of L\+IF image stored in Tele\+Disk image. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{td02lif_8h_a250c5e050c7c158c05611ba8dbf985a9}{td0\+\_\+init\+\_\+sectors}} (\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$\mbox{\hyperlink{td02lif_8c_affcceda12b139f26819f4929be705eb1}{disk}})
\begin{DoxyCompactList}\small\item\em Initialize track sector information Optionally decompress the data if decompression is enabled. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{td02lif_8h_a768caca68199c490335ee088781e7bba}{td02lif}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Convert a Teledisk L\+IF formatted disk image into a pure L\+IF image. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{td02lif_8h_af219299ebad47daa6631415a8b41345a}{debuglevel}}
\begin{DoxyCompactList}\small\item\em Debug flag -\/ used to log G\+P\+IB and emulator messages. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structliftel__t}{liftel\+\_\+t}} \mbox{\hyperlink{td02lif_8h_af2b2b3e4827acc662c88bb762e41106d}{liftel}}
\begin{DoxyCompactList}\small\item\em Teledisk liftel analysis and user overrides. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{td02lif_8h_aacffa7a6e218e2027e0702985d5177a7}\label{td02lif_8h_aacffa7a6e218e2027e0702985d5177a7}} 
\index{td02lif.h@{td02lif.h}!MAXCYL@{MAXCYL}}
\index{MAXCYL@{MAXCYL}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{MAXCYL}{MAXCYL}}
{\footnotesize\ttfamily \#define M\+A\+X\+C\+YL~255}



Maximum number of tracks per disk. 



Definition at line 62 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_a39ad5a6dea9e9b9d5314d32f397fee7d}\label{td02lif_8h_a39ad5a6dea9e9b9d5314d32f397fee7d}} 
\index{td02lif.h@{td02lif.h}!MAXSECTORS@{MAXSECTORS}}
\index{MAXSECTORS@{MAXSECTORS}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{MAXSECTORS}{MAXSECTORS}}
{\footnotesize\ttfamily \#define M\+A\+X\+S\+E\+C\+T\+O\+RS~255}



Maximum number of sectors per track Used for sector data and sorting tables. 



Definition at line 55 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_a6d1c996bff41748d6840c43bd803c103}\label{td02lif_8h_a6d1c996bff41748d6840c43bd803c103}} 
\index{td02lif.h@{td02lif.h}!MAXSIDES@{MAXSIDES}}
\index{MAXSIDES@{MAXSIDES}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{MAXSIDES}{MAXSIDES}}
{\footnotesize\ttfamily \#define M\+A\+X\+S\+I\+D\+ES~2}



Maximum number of sides per cyinder Tele\+Disk only trargetted floppies with 2 sides max! 



Definition at line 59 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_ade239296a2facdacc8b64d0791e2d806}\label{td02lif_8h_ade239296a2facdacc8b64d0791e2d806}} 
\index{td02lif.h@{td02lif.h}!MAXTRACKS@{MAXTRACKS}}
\index{MAXTRACKS@{MAXTRACKS}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{MAXTRACKS}{MAXTRACKS}}
{\footnotesize\ttfamily \#define M\+A\+X\+T\+R\+A\+C\+KS~(\mbox{\hyperlink{td02lif_8h_aacffa7a6e218e2027e0702985d5177a7}{M\+A\+X\+C\+YL}} $\ast$ \mbox{\hyperlink{td02lif_8h_a6d1c996bff41748d6840c43bd803c103}{M\+A\+X\+S\+I\+D\+ES}})}



Definition at line 64 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_ab85959b32fe78bf7aa9d41f24b51affb}\label{td02lif_8h_ab85959b32fe78bf7aa9d41f24b51affb}} 
\index{td02lif.h@{td02lif.h}!TD\_COMMENT\_SIZE@{TD\_COMMENT\_SIZE}}
\index{TD\_COMMENT\_SIZE@{TD\_COMMENT\_SIZE}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{TD\_COMMENT\_SIZE}{TD\_COMMENT\_SIZE}}
{\footnotesize\ttfamily \#define T\+D\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+S\+I\+ZE~10}



Size of Tele\+Disk comment header. 



Definition at line 47 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_adb7e27e4930514f5d308e595ac82179f}\label{td02lif_8h_adb7e27e4930514f5d308e595ac82179f}} 
\index{td02lif.h@{td02lif.h}!TD\_HEADER\_SIZE@{TD\_HEADER\_SIZE}}
\index{TD\_HEADER\_SIZE@{TD\_HEADER\_SIZE}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{TD\_HEADER\_SIZE}{TD\_HEADER\_SIZE}}
{\footnotesize\ttfamily \#define T\+D\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+S\+I\+ZE~12}



Size of Tele\+Disk image header. 



Definition at line 45 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_aed98c638ebf178b27d95e0ab0287740e}\label{td02lif_8h_aed98c638ebf178b27d95e0ab0287740e}} 
\index{td02lif.h@{td02lif.h}!TD\_SECTOR\_SIZE@{TD\_SECTOR\_SIZE}}
\index{TD\_SECTOR\_SIZE@{TD\_SECTOR\_SIZE}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{TD\_SECTOR\_SIZE}{TD\_SECTOR\_SIZE}}
{\footnotesize\ttfamily \#define T\+D\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE~6}



Size of Tele\+Disk sector header size. 



Definition at line 51 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_a073452932b78187f2195a7e780e39c77}\label{td02lif_8h_a073452932b78187f2195a7e780e39c77}} 
\index{td02lif.h@{td02lif.h}!TD\_TRACK\_SIZE@{TD\_TRACK\_SIZE}}
\index{TD\_TRACK\_SIZE@{TD\_TRACK\_SIZE}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{TD\_TRACK\_SIZE}{TD\_TRACK\_SIZE}}
{\footnotesize\ttfamily \#define T\+D\+\_\+\+T\+R\+A\+C\+K\+\_\+\+S\+I\+ZE~4}



Size of Tele\+Disk track header size. 



Definition at line 49 of file td02lif.\+h.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{td02lif_8h_a2fea857c30e2c901566fcf45fac68ac5}\label{td02lif_8h_a2fea857c30e2c901566fcf45fac68ac5}} 
\index{td02lif.h@{td02lif.h}!tm\_t@{tm\_t}}
\index{tm\_t@{tm\_t}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{tm\_t}{tm\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structtm}{tm}} \mbox{\hyperlink{time_8h_a2fea857c30e2c901566fcf45fac68ac5}{tm\+\_\+t}}}



Definition at line 66 of file td02lif.\+h.



\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635}\label{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}



Encoding format td\+\_\+track.\+P\+Side \& 0x80 values. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{IBMFORMAT\_SD@{IBMFORMAT\_SD}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!IBMFORMAT\_SD@{IBMFORMAT\_SD}}}\mbox{\Hypertarget{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a8bc31c01d944463ce726f1e0be2dc208}\label{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a8bc31c01d944463ce726f1e0be2dc208}} 
I\+B\+M\+F\+O\+R\+M\+A\+T\+\_\+\+SD&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{IBMFORMAT\_DD@{IBMFORMAT\_DD}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!IBMFORMAT\_DD@{IBMFORMAT\_DD}}}\mbox{\Hypertarget{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a70cfb8452c9a7c273d2330b8196a4310}\label{td02lif_8h_a726ca809ffd3d67ab4b8476646f26635a70cfb8452c9a7c273d2330b8196a4310}} 
I\+B\+M\+F\+O\+R\+M\+A\+T\+\_\+\+DD&\\
\hline

\end{DoxyEnumFields}


Definition at line 70 of file td02lif.\+h.

\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2d}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2d}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}



T\+D0 to L\+IF state machine states. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_INIT@{TD0\_INIT}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_INIT@{TD0\_INIT}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da58e36ef045836fef5beb7203038702db}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da58e36ef045836fef5beb7203038702db}} 
T\+D0\+\_\+\+I\+N\+IT&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_START@{TD0\_START}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_START@{TD0\_START}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dac8a30dec9ce7f9da528f90dc425240db}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dac8a30dec9ce7f9da528f90dc425240db}} 
T\+D0\+\_\+\+S\+T\+A\+RT&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_WAIT\_DIRECTORY@{TD0\_WAIT\_DIRECTORY}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_WAIT\_DIRECTORY@{TD0\_WAIT\_DIRECTORY}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da70580a7e132fd3209be3628279eacc1f}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da70580a7e132fd3209be3628279eacc1f}} 
T\+D0\+\_\+\+W\+A\+I\+T\+\_\+\+D\+I\+R\+E\+C\+T\+O\+RY&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_DIRECTORY@{TD0\_DIRECTORY}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_DIRECTORY@{TD0\_DIRECTORY}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dacc071de6c6236a108f0b962f95f92e55}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dacc071de6c6236a108f0b962f95f92e55}} 
T\+D0\+\_\+\+D\+I\+R\+E\+C\+T\+O\+RY&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_WAIT\_FILE@{TD0\_WAIT\_FILE}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_WAIT\_FILE@{TD0\_WAIT\_FILE}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dad3f312d34f6480680c3501cb20ce2354}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2dad3f312d34f6480680c3501cb20ce2354}} 
T\+D0\+\_\+\+W\+A\+I\+T\+\_\+\+F\+I\+LE&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_FILE@{TD0\_FILE}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_FILE@{TD0\_FILE}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da8109d3f481c35118326c26b8d0dccc6b}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da8109d3f481c35118326c26b8d0dccc6b}} 
T\+D0\+\_\+\+F\+I\+LE&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TD0\_DONE@{TD0\_DONE}!td02lif.h@{td02lif.h}}\index{td02lif.h@{td02lif.h}!TD0\_DONE@{TD0\_DONE}}}\mbox{\Hypertarget{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da5427de3288f10eaba6969c8155cfd04a}\label{td02lif_8h_a0411cd49bb5b71852cecd93bcbf0ca2da5427de3288f10eaba6969c8155cfd04a}} 
T\+D0\+\_\+\+D\+O\+NE&\\
\hline

\end{DoxyEnumFields}


Definition at line 77 of file td02lif.\+h.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{td02lif_8h_a768caca68199c490335ee088781e7bba}\label{td02lif_8h_a768caca68199c490335ee088781e7bba}} 
\index{td02lif.h@{td02lif.h}!td02lif@{td02lif}}
\index{td02lif@{td02lif}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td02lif()}{td02lif()}}
{\footnotesize\ttfamily int td02lif (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Convert a Teledisk L\+IF formatted disk image into a pure L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em telediskname} & T\+E\+L\+E\+D\+I\+SK image name \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & L\+IF file name to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on error 
\end{DoxyReturn}
Write L\+IF file

L\+IF summary

Close L\+IF file

Definition at line 1650 of file td02lif.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{td02lif_8h_ac777daf6e56deb920d24ac72f83f0624}\label{td02lif_8h_ac777daf6e56deb920d24ac72f83f0624}} 
\index{td02lif.h@{td02lif.h}!td0\_analize\_format@{td0\_analize\_format}}
\index{td0\_analize\_format@{td0\_analize\_format}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_analize\_format()}{td0\_analize\_format()}}
{\footnotesize\ttfamily int td0\+\_\+analize\+\_\+format (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk }\end{DoxyParamCaption})}



Analize Tele\+Disk disk sector data Problem\+: We may have a disk that was reformatted multiple times Each format may have used differing sector sizes, number of tracks, sides For example\+: First format 80 track disk, two sided, and 9 512 byte sectors per track Second format 35 tracks, single sided, 16 sectors 256 bytes size per track Clearly we only want the 35 tracks on the first side. 

What we do is examine the first 30 tracks (note\+: 30 is just a safe number less then 35) On side 1, on 30 tracks Find first sector and save its size Reject sectors that do not match size Find Last sector matching size Count sectors matching size On side 2, on 30 tracks Reject sectors that do not match size Find first sector and save its size Find Last sector matching size Count sectors matching size

If the disk had two sides recorded in the header Reject second side if side sector counts do N\+OT match Reject second side if NO remaining sectors Reject second side if sector ranges do not match or continue in range


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em dist} & T\+D0 image data @retrun 1 if OK, 0 on error \\
\hline
\end{DoxyParams}


Definition at line 896 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_a369d6a9b15ee337cfb9e998b3e914f9c}\label{td02lif_8h_a369d6a9b15ee337cfb9e998b3e914f9c}} 
\index{td02lif.h@{td02lif.h}!td0\_B2S@{td0\_B2S}}
\index{td0\_B2S@{td0\_B2S}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_B2S()}{td0\_B2S()}}
{\footnotesize\ttfamily void td0\+\_\+\+B2S (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{int}]{index,  }\item[{uint8\+\_\+t $\ast$}]{name,  }\item[{int}]{size }\end{DoxyParamCaption})}



Create a string from data that has no E\+OS but known size. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$B} & source \\
\hline
\mbox{\texttt{ in}}  & {\em index} & index offset into source data \\
\hline
\mbox{\texttt{ out}}  & {\em $\ast$name} & target string \\
\hline
\mbox{\texttt{ in}}  & {\em size} & size of string to write -\/ not including E\+OS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 68 of file td02lif.\+c.



Referenced by td0\+\_\+unpack\+\_\+disk\+\_\+header().

\mbox{\Hypertarget{td02lif_8h_a786b280e1ac85ba19bcb2f4ca0d21ee3}\label{td02lif_8h_a786b280e1ac85ba19bcb2f4ca0d21ee3}} 
\index{td02lif.h@{td02lif.h}!td0\_compressed@{td0\_compressed}}
\index{td0\_compressed@{td0\_compressed}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_compressed()}{td0\_compressed()}}
{\footnotesize\ttfamily void td0\+\_\+compressed (\begin{DoxyParamCaption}\item[{int}]{flag }\end{DoxyParamCaption})}



Enable Tele\+Disk image compression mode. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em flag} & compression anable/disable \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 250 of file td02lif.\+c.



Referenced by td0\+\_\+open().

\mbox{\Hypertarget{td02lif_8h_a1e9e20346b224655b6586eb34efe1b5f}\label{td02lif_8h_a1e9e20346b224655b6586eb34efe1b5f}} 
\index{td02lif.h@{td02lif.h}!td0\_crc16@{td0\_crc16}}
\index{td0\_crc16@{td0\_crc16}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_crc16()}{td0\_crc16()}}
{\footnotesize\ttfamily uint16\+\_\+t td0\+\_\+crc16 (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{uint16\+\_\+t}]{crc,  }\item[{uint16\+\_\+t}]{poly,  }\item[{int}]{size }\end{DoxyParamCaption})}



Compute C\+R\+C16 of 8bit data. 

\begin{DoxySeeAlso}{See also}
\href{https://en.wikipedia.org/wiki/Cyclic_redundancy_check}{\texttt{ https\+://en.\+wikipedia.\+org/wiki/\+Cyclic\+\_\+redundancy\+\_\+check}} F\+YI normal C\+R\+C16 typically use 0x1021 for ploy Note\+: You can do a C\+R\+C16 of data in blocks by passing the result as the crc initial value for the next call 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$B} & 8 bit binary data \\
\hline
\mbox{\texttt{ in}}  & {\em crc} & initial crc value \\
\hline
\mbox{\texttt{ out}}  & {\em poly} & ploynomial \\
\hline
\mbox{\texttt{ in}}  & {\em size} & number of bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
crc16 of result 
\end{DoxyReturn}


Definition at line 87 of file td02lif.\+c.



Referenced by td0\+\_\+open(), td0\+\_\+read\+\_\+disk(), td0\+\_\+unpack\+\_\+comment\+\_\+header(), td0\+\_\+unpack\+\_\+disk\+\_\+header(), and td0\+\_\+unpack\+\_\+track\+\_\+header().

\mbox{\Hypertarget{td02lif_8h_a48825de35a808127b9c304a764a48439}\label{td02lif_8h_a48825de35a808127b9c304a764a48439}} 
\index{td02lif.h@{td02lif.h}!td0\_density2bitrate@{td0\_density2bitrate}}
\index{td0\_density2bitrate@{td0\_density2bitrate}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_density2bitrate()}{td0\_density2bitrate()}}
{\footnotesize\ttfamily long td0\+\_\+density2bitrate (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{density }\end{DoxyParamCaption})}



Convert Denisity to bitrate @\+We don\textquotesingle{}t care about the density except as a possible filter. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em Density} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bitrate 
\end{DoxyReturn}


Definition at line 472 of file td02lif.\+c.

\mbox{\Hypertarget{td02lif_8h_a26d4f0afc5df75f388d93a9510ab39ee}\label{td02lif_8h_a26d4f0afc5df75f388d93a9510ab39ee}} 
\index{td02lif.h@{td02lif.h}!td0\_help@{td0\_help}}
\index{td0\_help@{td0\_help}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_help()}{td0\_help()}}
{\footnotesize\ttfamily void td0\+\_\+help (\begin{DoxyParamCaption}\item[{int}]{full }\end{DoxyParamCaption})}



Definition at line 1556 of file td02lif.\+c.



Referenced by help(), lif\+\_\+tests(), and td02lif().

\mbox{\Hypertarget{td02lif_8h_a4d01fdafef7fb089054149fd0c04c75f}\label{td02lif_8h_a4d01fdafef7fb089054149fd0c04c75f}} 
\index{td02lif.h@{td02lif.h}!td0\_hexdump@{td0\_hexdump}}
\index{td0\_hexdump@{td0\_hexdump}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_hexdump()}{td0\_hexdump()}}
{\footnotesize\ttfamily void td0\+\_\+hexdump (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{int}]{size }\end{DoxyParamCaption})}



hex listing of data 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$data} & date to dump \\
\hline
\mbox{\texttt{ in}}  & {\em size} & size of data to dump @retrun void \\
\hline
\end{DoxyParams}


Definition at line 110 of file td02lif.\+c.



Referenced by td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{td02lif_8h_a81ca655140437da58cb1d534792c8f83}\label{td02lif_8h_a81ca655140437da58cb1d534792c8f83}} 
\index{td02lif.h@{td02lif.h}!td0\_init\_liftel@{td0\_init\_liftel}}
\index{td0\_init\_liftel@{td0\_init\_liftel}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_init\_liftel()}{td0\_init\_liftel()}}
{\footnotesize\ttfamily void td0\+\_\+init\+\_\+liftel (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Tele\+Disk image Analisis structure Find attributes of L\+IF image stored in Tele\+Disk image. 



Definition at line 1577 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_a250c5e050c7c158c05611ba8dbf985a9}\label{td02lif_8h_a250c5e050c7c158c05611ba8dbf985a9}} 
\index{td02lif.h@{td02lif.h}!td0\_init\_sectors@{td0\_init\_sectors}}
\index{td0\_init\_sectors@{td0\_init\_sectors}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_init\_sectors()}{td0\_init\_sectors()}}
{\footnotesize\ttfamily void td0\+\_\+init\+\_\+sectors (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk }\end{DoxyParamCaption})}



Initialize track sector information Optionally decompress the data if decompression is enabled. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em p} & data buffer for read \\
\hline
\mbox{\texttt{ out}}  & {\em osize} & size of object \\
\hline
\mbox{\texttt{ out}}  & {\em size} & number of objects to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of dataactually read 
\end{DoxyReturn}


Definition at line 1614 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_ab49e4bf7cf89d5c6b90181a6bac46de6}\label{td02lif_8h_ab49e4bf7cf89d5c6b90181a6bac46de6}} 
\index{td02lif.h@{td02lif.h}!td0\_open@{td0\_open}}
\index{td0\_open@{td0\_open}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_open()}{td0\_open()}}
{\footnotesize\ttfamily int td0\+\_\+open (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk,  }\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Opne Tele\+Disk image file process header and optional comment block. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$disk} & Tele\+Disk information structure \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$name} & image file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success 0 on error Note\+: on success disk-\/$>$fi has the file handle disk-\/$>$td0\+\_\+name has the file name disk-\/$>$compresssed if image is compressed disk-\/$>$td\+\_\+header has teledisk header disk-\/$>$td\+\_\+comment has optional teledisk comment header or zeroed If disk.\+td\+\_\+comment.\+Size $>$ 0 disk-\/$>$comment has optional comment string or empty string If disk.\+td\+\_\+comment.\+Size $>$ 0 
\end{DoxyReturn}
@process Tele\+Disk disk image header

we expect \char`\"{}\+T\+D\char`\"{} (uncompressed) or \char`\"{}td\char`\"{} (compressed) format

We only accept Tele\+Disk versions $>$= 10 \&\& version $<$= 21

Time to Unix format

Definition at line 506 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_a3f65dd34ac6cf2ee2ab6d5a913b0e457}\label{td02lif_8h_a3f65dd34ac6cf2ee2ab6d5a913b0e457}} 
\index{td02lif.h@{td02lif.h}!td0\_read@{td0\_read}}
\index{td0\_read@{td0\_read}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_read()}{td0\_read()}}
{\footnotesize\ttfamily int td0\+\_\+read (\begin{DoxyParamCaption}\item[{void $\ast$}]{p,  }\item[{int}]{osize,  }\item[{int}]{size,  }\item[{\mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}} $\ast$}]{fp }\end{DoxyParamCaption})}



Read Tele\+Disk image data block Optionally decompress the data if decompression is enabled. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em p} & data buffer for read \\
\hline
\mbox{\texttt{ out}}  & {\em osize} & size of object \\
\hline
\mbox{\texttt{ out}}  & {\em size} & number of objects to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success all bytes read, 0 on failure not all bytes read 
\end{DoxyReturn}


Definition at line 264 of file td02lif.\+c.



Referenced by td0\+\_\+open(), and td0\+\_\+read\+\_\+disk().

\mbox{\Hypertarget{td02lif_8h_a87120823fa3dd587214e6c70ebde151f}\label{td02lif_8h_a87120823fa3dd587214e6c70ebde151f}} 
\index{td02lif.h@{td02lif.h}!td0\_read\_disk@{td0\_read\_disk}}
\index{td0\_read\_disk@{td0\_read\_disk}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_read\_disk()}{td0\_read\_disk()}}
{\footnotesize\ttfamily int td0\+\_\+read\+\_\+disk (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk }\end{DoxyParamCaption})}



Read Tele\+Disk image file and save all sector data. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em dist} & T\+D0 image data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success 0 on error 
\end{DoxyReturn}
Process all image Data

E\+OF? Tele\+Disk specification says E\+OF is 255 sectors

Process all track sectors

Sector Header

first test verifies sector $<$ 2K in size second test verifies no data or address mark errors

Compute how much data to read

td0\+\_\+rle does not use len internal data in the buffer does this We limit the expansion to sector size

=========================================

Definition at line 643 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_a7f9b8f09a74778aafcef0ccfcf7e73e6}\label{td02lif_8h_a7f9b8f09a74778aafcef0ccfcf7e73e6}} 
\index{td02lif.h@{td02lif.h}!td0\_rle@{td0\_rle}}
\index{td0\_rle@{td0\_rle}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_rle()}{td0\_rle()}}
{\footnotesize\ttfamily int td0\+\_\+rle (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{dst,  }\item[{uint8\+\_\+t $\ast$}]{src,  }\item[{int}]{max }\end{DoxyParamCaption})}



Expand a Run Length encoded Tele\+Disk sector Notes\+: the source length is encoded in the source data Credits based on work (C) 2006-\/2014 Jean-\/\+François D\+EL N\+E\+RO Part of the Hx\+C\+Floppy\+Emulator library G\+NU G\+PL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em dst} & destination expanded data \\
\hline
\mbox{\texttt{ in}}  & {\em src} & source data \\
\hline
\mbox{\texttt{ in}}  & {\em max} & maximum size of destination data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of expanded data, negative if size $>$ max 
\end{DoxyReturn}
@actual length

block size

repeat count

Definition at line 307 of file td02lif.\+c.



Referenced by td0\+\_\+read\+\_\+disk().

\mbox{\Hypertarget{td02lif_8h_a2b045f601a00f806f99e466e18109a08}\label{td02lif_8h_a2b045f601a00f806f99e466e18109a08}} 
\index{td02lif.h@{td02lif.h}!td0\_save\_lif@{td0\_save\_lif}}
\index{td0\_save\_lif@{td0\_save\_lif}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_save\_lif()}{td0\_save\_lif()}}
{\footnotesize\ttfamily int td0\+\_\+save\+\_\+lif (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk,  }\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



save remaining sectors as L\+IF data 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & sector data \\
\hline
\mbox{\texttt{ in}}  & {\em L\+IF} & L\+IF structure @retrun 1 if OK, 0 on error \\
\hline
\end{DoxyParams}


Definition at line 1303 of file td02lif.\+c.



Referenced by td02lif().

\mbox{\Hypertarget{td02lif_8h_a08cbf8c12076d3677df348da2dbf7ca2}\label{td02lif_8h_a08cbf8c12076d3677df348da2dbf7ca2}} 
\index{td02lif.h@{td02lif.h}!td0\_save\_lif\_sector@{td0\_save\_lif\_sector}}
\index{td0\_save\_lif\_sector@{td0\_save\_lif\_sector}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_save\_lif\_sector()}{td0\_save\_lif\_sector()}}
{\footnotesize\ttfamily int td0\+\_\+save\+\_\+lif\+\_\+sector (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk,  }\item[{uint8\+\_\+t $\ast$}]{data,  }\item[{int}]{size,  }\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Process all sectors on a track from Tele\+Disk image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & sector data \\
\hline
\mbox{\texttt{ in}}  & {\em size} & sector size \\
\hline
\mbox{\texttt{ in}}  & {\em L\+IF} & L\+IF structure @retrun 1 if OK, 0 on error \\
\hline
\end{DoxyParams}
==================================================== Write sectors from Teledisk track to L\+IF file \hypertarget{td02lif.c_autotoc_md188}{}\doxysubsection{We continue until the last last file sector}\label{td02lif.c_autotoc_md188}


Definition at line 1366 of file td02lif.\+c.



Referenced by td0\+\_\+save\+\_\+lif().

\mbox{\Hypertarget{td02lif_8h_aff9adf4831cee8528e02b6456459435e}\label{td02lif_8h_aff9adf4831cee8528e02b6456459435e}} 
\index{td02lif.h@{td02lif.h}!td0\_sectorinfo@{td0\_sectorinfo}}
\index{td0\_sectorinfo@{td0\_sectorinfo}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_sectorinfo()}{td0\_sectorinfo()}}
{\footnotesize\ttfamily void td0\+\_\+sectorinfo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtd__sector__t}{td\+\_\+sector\+\_\+t}} $\ast$}]{P }\end{DoxyParamCaption})}



Display Tele\+Disk sector data. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em P} & td\+\_\+sector pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 458 of file td02lif.\+c.



Referenced by td0\+\_\+read\+\_\+disk().

\mbox{\Hypertarget{td02lif_8h_ab14f2a074ca85e1b32cc26f3369c574f}\label{td02lif_8h_ab14f2a074ca85e1b32cc26f3369c574f}} 
\index{td02lif.h@{td02lif.h}!td0\_trackinfo@{td0\_trackinfo}}
\index{td0\_trackinfo@{td0\_trackinfo}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_trackinfo()}{td0\_trackinfo()}}
{\footnotesize\ttfamily void td0\+\_\+trackinfo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdisk__t}{disk\+\_\+t}} $\ast$}]{disk,  }\item[{int}]{trackind,  }\item[{int}]{index }\end{DoxyParamCaption})}



Display Tele\+Disk track sector values. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em sector} & track sector structure \\
\hline
\mbox{\texttt{ in}}  & {\em index} & sector index (not sector number) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 443 of file td02lif.\+c.



Referenced by td0\+\_\+analize\+\_\+format(), and td0\+\_\+read\+\_\+disk().

\mbox{\Hypertarget{td02lif_8h_aa2721b8d8bba4008a2b48d1b362b9850}\label{td02lif_8h_aa2721b8d8bba4008a2b48d1b362b9850}} 
\index{td02lif.h@{td02lif.h}!td0\_unpack\_comment\_header@{td0\_unpack\_comment\_header}}
\index{td0\_unpack\_comment\_header@{td0\_unpack\_comment\_header}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_unpack\_comment\_header()}{td0\_unpack\_comment\_header()}}
{\footnotesize\ttfamily int td0\+\_\+unpack\+\_\+comment\+\_\+header (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structtd__comment__t}{td\+\_\+comment\+\_\+t}} $\ast$}]{p }\end{DoxyParamCaption})}



Extract Tele\+Disk comment header data in architecture nutral way. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & source data \\
\hline
\mbox{\texttt{ out}}  & {\em p} & Tele\+Disk comment header structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Tele\+Disk comment header size (not structure size) 
\end{DoxyReturn}


Definition at line 178 of file td02lif.\+c.



Referenced by td0\+\_\+open().

\mbox{\Hypertarget{td02lif_8h_a038d4e9f86f76569a97e443e376a8e11}\label{td02lif_8h_a038d4e9f86f76569a97e443e376a8e11}} 
\index{td02lif.h@{td02lif.h}!td0\_unpack\_disk\_header@{td0\_unpack\_disk\_header}}
\index{td0\_unpack\_disk\_header@{td0\_unpack\_disk\_header}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_unpack\_disk\_header()}{td0\_unpack\_disk\_header()}}
{\footnotesize\ttfamily int td0\+\_\+unpack\+\_\+disk\+\_\+header (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structtd__header__t}{td\+\_\+header\+\_\+t}} $\ast$}]{p }\end{DoxyParamCaption})}



Extract Tele\+Disk image header data in architecture nutral way. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & source data \\
\hline
\mbox{\texttt{ out}}  & {\em p} & Tele\+Disk image header structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Tele\+Disk image header size (not structure size) 
\end{DoxyReturn}


Definition at line 151 of file td02lif.\+c.



Referenced by td0\+\_\+open().

\mbox{\Hypertarget{td02lif_8h_ac393151af482d511b246de534da58e6f}\label{td02lif_8h_ac393151af482d511b246de534da58e6f}} 
\index{td02lif.h@{td02lif.h}!td0\_unpack\_sector\_header@{td0\_unpack\_sector\_header}}
\index{td0\_unpack\_sector\_header@{td0\_unpack\_sector\_header}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_unpack\_sector\_header()}{td0\_unpack\_sector\_header()}}
{\footnotesize\ttfamily int td0\+\_\+unpack\+\_\+sector\+\_\+header (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structtd__sector__t}{td\+\_\+sector\+\_\+t}} $\ast$}]{p }\end{DoxyParamCaption})}



Extract Tele\+Disk sector header data in architecture nutral way. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & source data \\
\hline
\mbox{\texttt{ out}}  & {\em p} & Tele\+Disk sector header structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Tele\+Disk sector header size (not structure size) 
\end{DoxyReturn}


Definition at line 232 of file td02lif.\+c.



Referenced by td0\+\_\+read\+\_\+disk().

\mbox{\Hypertarget{td02lif_8h_ab9cc29346498d37ff85d3a3417d8fc11}\label{td02lif_8h_ab9cc29346498d37ff85d3a3417d8fc11}} 
\index{td02lif.h@{td02lif.h}!td0\_unpack\_track\_header@{td0\_unpack\_track\_header}}
\index{td0\_unpack\_track\_header@{td0\_unpack\_track\_header}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{td0\_unpack\_track\_header()}{td0\_unpack\_track\_header()}}
{\footnotesize\ttfamily int td0\+\_\+unpack\+\_\+track\+\_\+header (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structtd__track__t}{td\+\_\+track\+\_\+t}} $\ast$}]{p }\end{DoxyParamCaption})}



Extract Tele\+Disk track header data in architecture nutral way. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & source data \\
\hline
\mbox{\texttt{ out}}  & {\em p} & Tele\+Disk track header structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Tele\+Disk track header size (not structure size) 
\end{DoxyReturn}


Definition at line 201 of file td02lif.\+c.



Referenced by td0\+\_\+read\+\_\+disk().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{td02lif_8h_af219299ebad47daa6631415a8b41345a}\label{td02lif_8h_af219299ebad47daa6631415a8b41345a}} 
\index{td02lif.h@{td02lif.h}!debuglevel@{debuglevel}}
\index{debuglevel@{debuglevel}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{debuglevel}{debuglevel}}
{\footnotesize\ttfamily int debuglevel}



Debug flag -\/ used to log G\+P\+IB and emulator messages. 



Definition at line 33 of file gpib\+\_\+task.\+c.



Referenced by G\+P\+I\+B(), gpib\+\_\+error\+\_\+test(), gpib\+\_\+file\+\_\+init(), G\+P\+I\+B\+\_\+\+L\+I\+S\+T\+E\+N(), G\+P\+I\+B\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+Y\+\_\+\+A\+D\+D\+R\+E\+S\+S(), G\+P\+I\+B\+\_\+\+T\+A\+L\+K(), gpib\+\_\+task(), listen\+\_\+cleanup(), and Send\+\_\+\+Identify().

\mbox{\Hypertarget{td02lif_8h_af2b2b3e4827acc662c88bb762e41106d}\label{td02lif_8h_af2b2b3e4827acc662c88bb762e41106d}} 
\index{td02lif.h@{td02lif.h}!liftel@{liftel}}
\index{liftel@{liftel}!td02lif.h@{td02lif.h}}
\doxysubsubsection{\texorpdfstring{liftel}{liftel}}
{\footnotesize\ttfamily \mbox{\hyperlink{structliftel__t}{liftel\+\_\+t}} liftel}



Teledisk liftel analysis and user overrides. 



Definition at line 60 of file td02lif.\+c.



Referenced by td02lif(), td0\+\_\+analize\+\_\+format(), td0\+\_\+init\+\_\+liftel(), td0\+\_\+save\+\_\+lif(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

